// ***********************************************************************
// Assembly         : Pedantic.Genetics
// Author           : JoAnn D. Peeler
// Created          : 03-12-2023
//
// Last Modified By : JoAnn D. Peeler
// Last Modified On : 03-28-2023
// ***********************************************************************
// <copyright file="ChessWeights.cs" company="Pedantic.Genetics">
//     Copyright (c) . All rights reserved.
// </copyright>
// <summary>
//     Mapped POCO class for maintaining the weights in the LiteDB 
//     database.
// </summary>
// ***********************************************************************
using Pedantic.Utilities;

namespace Pedantic.Genetics
{
    public sealed class ChessWeights
    {
        public static readonly Guid DEFAULT_IMMORTAL_ID = new("da5e310e-b0dc-4c77-902c-5a46cc81bb73");
        public const int MAX_WEIGHTS = 3622;
        public const int ENDGAME_WEIGHTS = 1811;
        public const int PIECE_WEIGHT_LENGTH = 6;
        public const int PIECE_SQUARE_LENGTH = 1536;
        public const int PIECE_VALUES = 0;
        public const int PIECE_SQUARE_TABLE = 6;
        public const int PIECE_MOBILITY = 1542;
        public const int KING_ATTACK = 1546;
        public const int PAWN_SHIELD = 1549;
        public const int ISOLATED_PAWN = 1552;
        public const int BACKWARD_PAWN = 1553;
        public const int DOUBLED_PAWN = 1554;
        public const int CONNECTED_PAWN = 1555;
        public const int KNIGHT_OUTPOST = 1619;
        public const int BISHOP_OUTPOST = 1620;
        public const int BISHOP_PAIR = 1621;
        public const int ROOK_ON_OPEN_FILE = 1622;
        public const int ROOK_ON_HALF_OPEN_FILE = 1623;
        public const int ROOK_BEHIND_PASSED_PAWN = 1624;
        public const int DOUBLED_ROOKS_ON_FILE = 1625;
        public const int KING_ON_OPEN_FILE = 1626;
        public const int KING_ON_HALF_OPEN_FILE = 1627;
        public const int CASTLING_AVAILABLE = 1628;
        public const int CASTLING_COMPLETE = 1629;
        public const int CENTER_CONTROL = 1630;
        public const int QUEEN_ON_OPEN_FILE = 1632;
        public const int QUEEN_ON_HALF_OPEN_FILE = 1633;
        public const int ROOK_ON_7TH_RANK = 1634;
        public const int PASSED_PAWN = 1635;
        public const int BAD_BISHOP_PAWN = 1699;
        public const int BLOCK_PASSED_PAWN = 1763;

        public ChessWeights(Guid _id, bool isActive, bool isImmortal, string description, short[] weights, 
            float fitness, int sampleSize, float k, short totalPasses, DateTime updatedOn, DateTime createdOn)
        {
            Id = _id;
            IsActive = isActive;
            IsImmortal = isImmortal;
            Description = description;
            Weights = weights;
            Fitness = fitness;
            SampleSize = sampleSize;
            K = k;
            TotalPasses = totalPasses;
            UpdatedOn = updatedOn;
            CreatedOn = createdOn;
        }

        public ChessWeights(ChessWeights other)
        {
            Id = Guid.NewGuid();
            IsActive = other.IsActive;
            IsImmortal = other.IsImmortal;
            Description = other.Description;
            Weights = ArrayEx.Clone(other.Weights);
            Fitness = other.Fitness;
            SampleSize = other.SampleSize;
            K = other.K;
            TotalPasses = other.TotalPasses;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights(short[] weights)
        {
            Id = Guid.NewGuid();
            IsActive = true;
            IsImmortal = false;
            Description = "Anonymous";
            Weights = ArrayEx.Clone(weights);
            Fitness = 0;
            SampleSize = 0;
            K = 0;
            TotalPasses = 0;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights()
        {
            Id = Guid.NewGuid();
            IsActive = false;
            IsImmortal = false;
            Description = string.Empty;
            Weights = Array.Empty<short>();
            Fitness = default;
            SampleSize = default;
            K = default;
            TotalPasses = default;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public Guid Id { get; set; }
        public bool IsActive { get; set; }
        public bool IsImmortal { get; set; }
        public string Description { get; set; }
        public short[] Weights { get; init; }
        public float Fitness { get; set; }
        public int SampleSize { get; set; }
        public float K { get; set; }
        public short TotalPasses { get; set; }
        public DateTime UpdatedOn { get; set; }

        public DateTime CreatedOn { get; set; }

        public static ChessWeights Empty { get; } = new ChessWeights();

        public static ChessWeights CreateParagon()
        {
            ChessWeights paragon = new(paragonWeights)
            {
                Id = DEFAULT_IMMORTAL_ID,
                IsImmortal = true,
                Fitness = 0,
                SampleSize = 0,
                K = 0,
                TotalPasses = 0,
                UpdatedOn = DateTime.UtcNow
            };
            return paragon;
        }

        public static bool LoadParagon(out ChessWeights paragon)
        {
            var rep = new ChessDb();
            ChessWeights? p = rep.Weights.GetAll().FirstOrDefault(w => w.IsActive && w.IsImmortal);
            if (p == null)
            {
                p = CreateParagon();
                rep.Weights.Insert(p);
                rep.Save();
                paragon = p;
            }
            else
            {
                paragon = p;
            }
            return true;
        }

        // Solution sample size: 12000000, generated on Fri, 08 Sep 2023 06:22:32 GMT
        // Solution error: 0.119442, accuracy: 0.5145, seed: 1897257332
        private static readonly short[] paragonWeights =
        {
            /*------------------- OPENING WEIGHTS -------------------*/

            /* opening piece values */
            115, 434, 491, 604, 1474, 0,

            /* opening piece square values */

            #region opening piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
             -32,  -40,  -23,   -4,  -37,   38,   43,  -10,
             -29,  -28,  -15,  -14,  -12,    1,   10,   -9,
             -27,  -25,   -3,   -3,   10,   19,   -3,   -9,
             -19,   -8,   15,   24,   41,   49,   23,   14,
             -20,    4,   11,   52,   53,  140,  162,   54,
             127,  136,  103,  120,   85,  126,   37,   52,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -47,  -70,  -44,  -54,  -28,   28,   43,   -1,
             -42,  -64,  -27,  -27,   -2,   -6,   23,   10,
             -25,  -15,   -3,    3,   -8,   -5,  -14,    3,
             -23,   19,   24,   34,    9,   -4,   -1,   12,
              65,  111,  101,   56,   77,    9,   49,    6,
              89,   34,   71,   70,  120,  107,  144,  173,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
              -3,   24,    4,  -24,  -43,  -20,  -34,  -48,
              12,   29,   -6,   -1,  -27,  -16,  -33,  -47,
               1,   -1,  -11,   -6,   -5,    5,  -12,  -25,
              -5,    0,    8,   15,   29,   38,    7,   -4,
               3,   31,    7,   47,   64,  135,  113,   24,
             151,  163,  155,  142,   90,  119,   56,   46,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -30,    3,   30,    5,   -6,    0,  -21,   -1,
             -22,   -2,    9,  -16,    7,  -24,  -32,  -18,
             -17,  -13,   14,    6,   21,    6,  -20,  -16,
              41,   64,   67,   39,   16,   18,   -3,    3,
             102,   78,  119,   72,   37,   20,   -7,   25,
              99,   62,   80,   40,   75,   87,  199,  126,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
            -114,  -15,  -47,  -25,   -4,    1,  -10,  -67,
             -39,  -37,   -8,   12,    8,   18,   -6,   -1,
             -23,  -11,   -9,   15,   29,    0,    3,    2,
             -10,   -1,    8,   10,   18,   27,   33,   13,
              11,   -4,   16,   30,   -9,    9,  -24,   51,
             -18,   35,   37,   54,  101,  143,   37,   -9,
              -2,  -12,   22,   58,   25,   94,   21,   -6,
            -262,  -21,  -23,   68,   56,  -98,   -4, -198,

            /* knights: KQ */
            -105,  -48,  -60,  -40,  -23,  -29,  -26,  -24,
             -47,  -18,  -26,   13,   -4,    2,  -56,  -45,
             -38,   -7,  -13,   20,    6,    4,   -8,  -20,
              -2,   29,   33,   48,   23,    1,   -1,  -17,
              45,  -10,   26,   43,   58,   48,   24,    5,
              39,   48,  121,   92,   62,   57,   -5,   -5,
              23,  -11,    6,   43,   15,   37,   -2,  -23,
            -233,  -20,  -30,   34,  -61,  -13,  -24, -114,

            /* knights: QK */
             -77,  -50,  -41,  -60,  -25,  -22,  -53, -109,
             -34,  -32,   -5,   -3,  -13,    2,  -67,   -6,
             -21,   -8,   10,   43,   57,  -25,   -2,  -60,
              38,   28,   36,   22,   33,   12,   15,  -13,
               7,   30,   60,  100,   40,   42,   14,   65,
              11,   20,   27,   72,   98,  131,   33,    2,
             -16,   -5,   16,   74,   12,   57,   15,   85,
            -110,  -10,   -9,  -23,   -2,   -8,  -66,  -77,

            /* knights: QQ */
               3,  -36,   24,  -71,  -45,  -56,  -41,  -53,
             -15,  -26,    6,    9,  -14,   12,  -23, -109,
               3,   -2,   10,   23,   18,  -33,  -16,  -41,
              13,   11,   41,   53,   19,   10,   34,  -24,
              37,  -15,   23,   38,   33,   35,   36,    7,
              69,  -26,   42,  100,   47,   31,   52,   -2,
             -28,   26,   -9,   18,   55,   53,   -5,  -65,
            -147,    0,    4,   26,    0,    5,   33,  -91,

            /* bishops: KK */
              -3,   13,   -9,  -30,   -4,   -4,    0,  -12,
              13,    7,   10,    0,    3,   21,   32,   18,
              -5,    6,   14,    5,    7,    1,    8,    4,
             -17,  -13,   -8,   28,   20,  -13,  -10,   17,
             -10,   -7,   -3,   30,    7,   22,  -13,  -16,
              -3,   11,   -7,  -15,    0,   64,   47,  -15,
             -50,  -28,  -21,  -33,  -25,  -17,  -56,  -61,
            -103,  -61,  -28,  -46,  -20,  -53,   32,  -42,

            /* bishops: KQ */
             -60,    6,  -41,  -39,   -6,   -7,   40,  -32,
             -31,  -10,  -27,   -5,   -2,    8,   56,   10,
             -32,  -16,   19,    6,   11,   34,   39,   26,
              11,  -12,   -6,   36,   53,   21,  -16,  -24,
             -24,    7,   16,   73,   60,   14,    5,    4,
             -22,   75,  104,   -9,   22,   38,   21,    3,
             -60,   22,  -47,  -10,    0,  -15,  -26,  -51,
             -50,  -11,    9,   -2,    5,  -10,    9,  -35,

            /* bishops: QK */
             -12,   14,    6,  -26,  -27,  -32,  -33, -104,
              46,   49,   24,   17,  -10,  -19,  -37,  -22,
              -2,   30,   37,   23,    1,   -1,   -5,    0,
               9,   14,    6,   58,   34,  -20,  -33,  -12,
             -27,    8,   23,   77,   26,   23,    5,  -19,
             -37,    9,   23,    8,   40,   52,   77,   11,
             -33,  -21,  -24,  -34,  -38,    4,  -12,  -44,
             -49,  -36,  -30,  -52,   32,  -11,   13,  -37,

            /* bishops: QQ */
             -92,  -59,    1,  -60,  -28,  -24,   12,  -35,
               8,   48,  -15,   19,  -40,   13,  -21,   42,
              -3,   31,   10,    9,    7,   15,   24,   -3,
              36,   27,    9,   55,   28,   25,    3,   12,
               7,   -8,   19,   46,   36,    1,    7,  -13,
             -29,   66,   96,   41,   -4,   52,  -20,   -7,
             -27,  -11,   60,   17,   35,   -8,   17,  -15,
              -6,  -14,   -8,   25,   24,   23,    9,  -85,

            /* rooks: KK */
             -14,   -3,   -7,    4,   12,   13,   22,   -8,
             -34,  -14,  -17,   -8,   -9,   15,   35,   -5,
             -39,  -40,  -33,  -25,   -3,   -7,   28,    1,
             -35,  -26,  -27,  -17,  -26,  -40,   11,  -20,
             -14,   -6,    1,   29,   -6,   21,   48,   24,
              10,   50,   48,   42,   79,  123,  135,   73,
             -11,  -17,    5,   26,   27,   80,   81,  121,
              90,   65,   50,   67,   47,   84,  104,  126,

            /* rooks: KQ */
             -17,   20,   -1,   -9,  -11,    3,  -14,  -25,
             -45,    8,  -18,  -22,  -26,  -31,  -34,  -28,
             -38,  -16,  -45,  -40,  -53,  -29,  -16,  -39,
             -60,  -23,  -62,   -7,  -21,  -63,  -12,   -9,
              -8,   27,  -18,   -7,   27,   12,    7,    2,
              55,   83,   38,   63,   50,   70,   84,   49,
              10,   34,   36,   28,   50,   16,   32,   57,
              30,   29,   69,   29,   32,   53,   54,   77,

            /* rooks: QK */
             -55,  -14,   -7,    1,    0,   -2,   25,  -15,
             -34,  -42,  -34,  -19,  -40,  -37,   -7,  -10,
             -26,    3,  -33,  -34,  -65,  -70,  -11,  -13,
               2,   29,  -29,  -37,  -43,  -50,   14,  -17,
              36,   27,   36,    7,  -21,    1,   25,   30,
              25,   99,   35,    0,   42,   78,  114,   63,
              17,   50,   38,   18,  -15,   58,   64,   32,
             163,   92,   50,   24,   17,   37,   80,   84,

            /* rooks: QQ */
             -31,    1,    3,   21,    3,  -14,  -18,  -26,
             -14,  -21,  -34,  -11,  -28,  -20,  -17,   -9,
             -89,  -12,  -24,  -20,  -56,  -35,  -30,  -44,
             -34,   29,  -23,  -34,  -42,  -18,  -40,   -4,
              12,   49,   14,   83,   22,   39,   -1,   26,
              51,   75,  107,   76,   68,   50,   45,   27,
              93,   83,   48,   57,  107,   53,   50,   12,
              30,   33,   13,   18,   13,   59,   85,   26,

            /* queens: KK */
               4,    7,   18,   22,   44,    9,  -65,  -30,
              -9,   14,    9,   16,   17,   44,   27,    2,
             -10,   -5,   -4,  -15,    4,  -11,    5,    0,
              -9,  -30,  -23,  -35,  -29,  -30,   -7,  -32,
             -14,  -15,  -48,  -50,  -44,  -46,  -31,  -29,
             -13,    6,  -41,  -62,  -14,   70,   34,  -12,
             -29,  -51,  -32,  -39,  -59,   39,    3,   84,
             -19,    2,   25,    5,   29,   82,  137,   95,

            /* queens: KQ */
              41,   13,    3,   17,   15,   -4,  -25,  -14,
              27,   21,   36,   10,   16,    8,  -56,  -33,
              12,   -9,   20,    2,    4,   10,   -8,  -16,
             -12,   43,  -30,  -36,  -13,  -18,  -23,   -5,
              -1,    6,  -26,  -13,   23,    0,   -6,   13,
              27,   72,   28,   -3,   11,   28,   18,   25,
              58,   35,   45,   79,   51,   24,  -21,   18,
              64,  117,   79,   64,   19,   63,   48,   -3,

            /* queens: QK */
             -70,  -75,  -10,   -4,    2,  -14,  -17,  -25,
             -74,  -53,   24,    9,    9,   -7,   16,    8,
             -44,  -12,  -14,  -30,    0,  -28,   -3,    3,
             -25,  -53,  -38,  -25,  -23,  -29,   -2,  -21,
               6,  -20,  -30,  -26,  -39,    2,  -15,  -13,
              -1,   -5,  -14,  -24,  -15,   43,   51,   35,
             -11,    0,  -31,   -2,  -12,    9,   25,   58,
             -20,   -3,   16,    2,  -40,   54,   60,   61,

            /* queens: QQ */
             -45,  -71,  -34,  -18,   31,    8,  -27,  -36,
             -60,  -31,   25,   29,  -19,   -9,    5,   -1,
               0,    4,    1,   -5,  -16,   -3,   -6,  -13,
             -30,   36,  -26,   -7,   -6,  -28,   -7,  -19,
              -7,  -29,   17,   36,   37,    7,   -8,   23,
              48,   55,   96,   69,   13,    7,   -4,   18,
              65,   89,   94,   39,   28,   -3,   11,  -29,
               8,  107,   14,   10,   53,   33,   26,   19,

            /* kings: KK */
               0,    0,    0,    0,  -37,  -66,   12,    7,
               0,    0,    0,    0,   -8,    2,   23,    6,
               0,    0,    0,    0,   35,   -6,   -4,  -46,
               0,    0,    0,    0,  121,   85,   25,  -68,
               0,    0,    0,    0,  191,  278,  155,   34,
               0,    0,    0,    0,  211,  269,  244,  157,
               0,    0,    0,    0,  209,  188,  171,  124,
               0,    0,    0,    0,  109,   81,   81,    7,

            /* kings: KQ */
               0,    0,    0,    0,  -75,  -95,    1,   -5,
               0,    0,    0,    0,  -19,  -17,   -9,  -14,
               0,    0,    0,    0,   -1,   13,   -4,  -60,
               0,    0,    0,    0,   80,   55,   23,  -19,
               0,    0,    0,    0,  150,  102,   98,   25,
               0,    0,    0,    0,  188,   91,   64,   28,
               0,    0,    0,    0,  253,  237,   78,   27,
               0,    0,    0,    0,   75,   96,  131,   15,

            /* kings: QK */
              -8,   13,  -35, -102,    0,    0,    0,    0,
              20,   -2,  -28,  -36,    0,    0,    0,    0,
             -14,  -11,    6,  -30,    0,    0,    0,    0,
             -10,   41,   47,   57,    0,    0,    0,    0,
              -2,   70,  116,  124,    0,    0,    0,    0,
              40,  117,  123,  128,    0,    0,    0,    0,
              51,  138,  113,  133,    0,    0,    0,    0,
              -6,   77,  170,   51,    0,    0,    0,    0,

            /* kings: QQ */
             -86,  -15,  -62, -107,    0,    0,    0,    0,
             -29,  -28,  -15,  -38,    0,    0,    0,    0,
             -51,   -9,   -2,    4,    0,    0,    0,    0,
             -12,   44,   38,   85,    0,    0,    0,    0,
              59,  167,  189,  139,    0,    0,    0,    0,
              43,  130,  145,   81,    0,    0,    0,    0,
              12,   62,  112,  104,    0,    0,    0,    0,
             -35,   16,   59,  118,    0,    0,    0,    0,

            #endregion

            /* opening mobility weights */

              10, // knights
               5, // bishops
               2, // rooks
              -1, // queens

            /* opening squares attacked near enemy king */
              25, // attacks to squares 1 from king
              21, // attacks to squares 2 from king
               7, // attacks to squares 3 from king

            /* opening pawn shield/king safety */
              28, // # friendly pawns 1 from king
              15, // # friendly pawns 2 from king
               9, // # friendly pawns 3 from king

            /* opening isolated pawns */
            -11,

            /* opening backward pawns */
            -14,

            /* opening doubled pawns */
            -19,

            /* opening adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              13,   -1,    1,   17,   20,    2,  -19,   -7,
               6,   11,   -4,   13,   25,    4,    0,   -5,
              11,   12,    9,   15,   32,   45,   18,   35,
              55,   30,   56,   29,  108,   81,   60,   36,
              83,  174,  169,  216,  163,  212,  148,   88,
             159,  254,  200,  387,  291,  244,   98,   24,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening knight on outpost */
            3,

            /* opening bishop on outpost */
            14,

            /* opening bishop pair */
            39,

            /* opening rook on open file */
            38,

            /* opening rook on half-open file */
            15,

            /* opening rook behind passed pawn */
            -10,

            /* opening doubled rooks on file */
            10,

            /* opening king on open file */
            -72,

            /* opening king on half-open file */
            -33,

            /* opening castling rights available */
            27,

            /* opening castling complete */
            19,

            /* opening center control */
               3, // D0
               4, // D1

            /* opening queen on open file */
            -8,

            /* opening queen on half-open file */
            9,

            /* opening rook on seventh rank */
            27,

            /* opening passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
               1,  -19,  -22,  -35,   19,   -5,   -1,   38,
               3,   -5,  -18,  -18,  -27,  -26,  -36,   11,
              22,   22,   -6,   23,    0,  -15,  -33,   -3,
              73,   74,   55,   44,   33,   38,   55,   33,
             155,  142,  128,   81,   74,  105,   41,   77,
             167,  179,  163,  175,  174,  121,  164,  159,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              -5,   -4,  -11,   -8,  -15,  -26,  -17,    1,
             -10,   -6,  -15,   -7,  -12,  -12,  -14,   -6,
              -6,    7,   -2,   -4,  -16,  -15,   -7,    0,
               2,    3,    0,   -2,   -1,    4,   -3,   -5,
              14,   22,   25,   12,   31,   16,   57,   -4,
              50,   59,   50,   63,   41,   67,   45,   87,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening block passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,  // blocked by pawns
               0,   76,   68,   63,   60,   89,   93,    0,  // blocked by knights
               0,   29,   36,   23,   22,   84,  110,    0,  // blocked by bishops
               0,  -41,  -17,  -14,  -20,   20,  173,    0,  // blocked by rooks
               0,    9,   51,   24,   15,    8,  -94,    0,  // blocked by queens
               0,   12,   65,  105,  106,  218,  214,    0,  // blocked by kings


            /*------------------- END GAME WEIGHTS -------------------*/

            /* end game piece values */
            166, 472, 523, 917, 1553, 0,

            /* end game piece square values */

            #region end game piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
               8,    6,    0,  -18,   38,   10,  -15,  -32,
               0,   -2,  -12,   -6,   -1,   -8,  -19,  -28,
              13,   12,  -16,  -26,  -27,  -17,   -9,  -31,
              39,   23,    7,  -41,  -30,  -17,   11,   -9,
              75,   65,   64,   23,   29,    6,   11,   -9,
             131,   98,  121,   47,   68,   17,   50,    5,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
              19,   34,   26,   64,   -6,   -9,  -29,  -14,
               8,   23,    0,   -2,  -23,  -14,  -34,  -22,
              -3,   -4,  -15,  -19,  -13,    1,    0,   -2,
               9,  -25,  -27,  -22,    5,   56,   60,   57,
             -18,  -55,  -34,   25,   78,  151,  166,  145,
              12,   24,   27,   92,  140,  209,  177,  173,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
              -9,  -27,   -9,   19,   24,   28,   32,   35,
             -14,  -30,   -8,  -19,    4,    0,    4,   14,
              15,   21,   12,   -9,   -7,  -11,   -9,   -8,
              70,   67,   49,    5,   -4,  -15,    0,    0,
             115,  132,  149,   83,   47,    1,    5,    3,
             146,  164,  207,  130,   90,   32,   10,   15,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -18,  -24,  -14,   -1,    1,   -4,    5,    3,
             -19,  -19,  -16,   -9,  -14,  -19,  -12,   -4,
             -13,   -3,  -29,  -15,  -25,  -23,   -5,   -6,
             -22,  -26,  -28,  -15,   -7,    8,   18,   27,
             -45,  -31,  -33,   23,   51,   69,   95,   74,
              18,   46,   29,   93,   82,  123,   91,  132,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
             -59,  -98,  -34,  -19,  -24,  -29,  -47,  -67,
             -60,  -12,  -26,  -34,  -14,   -5,  -10,  -25,
             -40,  -11,    4,   19,   16,   -5,   10,   -4,
               9,   31,   43,   53,   53,   46,   38,   15,
              17,   15,   37,   57,   57,   75,   86,   31,
              33,   20,   32,   19,   11,    9,   53,   31,
               9,   29,   26,   33,   52,   -3,    4,   21,
              -1,   24,   27,   16,   21,   21,   26,  -83,

            /* knights: KQ */
             -98,  -27,   -1,    3,  -18,  -16,   -3, -140,
             -49,   -5,  -12,  -24,  -15,   -2,   10,  -12,
             -25,  -40,    3,   -7,    6,  -29,    3,   -4,
              -2,   -7,   10,   -4,   19,   26,   20,   25,
             -34,  -18,    9,   10,    3,    8,   -7,    2,
             -23,  -45,  -56,  -32,    1,   10,   39,    9,
             -42,  -20,  -30,   -5,    6,   16,   10,  -10,
            -125,  -41,  -23,   -2,  -10,   47,   28,  -40,

            /* knights: QK */
            -104,    1,   -1,   28,  -11,  -19,  -26,  -77,
             -69,    6,  -10,   -3,    3,   -2,   -4,  -85,
               3,  -20,   -9,   11,  -17,    3,  -18,  -36,
              -5,   12,   13,   35,   13,   27,   -1,  -21,
              30,   21,   19,    4,   19,   22,    5,  -25,
              38,   37,   36,   -7,   -1,  -25,    1,   -5,
              14,   12,   47,   36,   20,   -3,  -29,  -42,
             -99,   13,   18,    5,   17,  -14,  -19,  -99,

            /* knights: QQ */
             -78,   -4,  -14,   26,   22,   12,  -65,  -74,
             -35,   40,  -19,   -5,   -8,  -42,    6,  -47,
              -3,   -8,   -9,   10,    5,    1,    4,  -33,
              51,   24,   23,   -1,    9,    9,    4,    6,
               9,   34,    6,   16,   20,    1,   -3,   16,
              -4,   17,   -6,   -2,    4,   31,    0,   -7,
              48,   15,   20,   47,   26,   14,   26,   26,
             -90,   51,   18,   33,   -4,   54,   47,  -42,

            /* bishops: KK */
             -40,  -49,  -39,    8,   -4,    1,  -21,  -67,
             -41,  -23,  -15,    2,   -1,   -9,  -28,  -69,
             -12,   10,   33,   16,   43,   19,   -8,  -10,
              13,   29,   45,   21,   10,   32,    6,  -36,
              23,   17,   17,   19,   24,   20,   24,   37,
              18,   23,   21,   21,   27,   28,   17,   50,
              34,   32,   29,   36,   25,   27,   12,   23,
              61,   47,   43,   50,   37,   20,   -9,   19,

            /* bishops: KQ */
              -1,   -4,    5,   -3,  -14,  -25,  -63,  -80,
             -23,  -17,   15,   -2,   -2,  -12,  -18,  -61,
              -5,   11,   14,    5,   18,   -4,  -10,  -26,
               1,   15,    3,   -7,   -1,   31,   29,   23,
              22,    3,  -14,  -43,    3,   27,   34,    9,
              -7,  -25,  -26,   13,    7,    6,   21,   25,
             -28,  -12,   17,   -1,   -2,   15,   42,   52,
              16,   -6,  -12,    8,    7,   23,   23,   30,

            /* bishops: QK */
             -44,  -34,   -4,   17,   17,  -14,   18,  -24,
             -45,  -23,    0,    1,    2,   -2,   -9,  -35,
               7,   11,    9,   21,   31,    1,   -7,  -37,
              -9,   18,   46,   -3,   -3,   30,   26,   13,
              41,   22,   16,   -4,    7,   20,  -12,   21,
              32,   27,   17,   29,   20,   16,  -30,    7,
              30,   20,   38,   44,   27,   11,  -17,  -27,
              22,   22,   26,   46,   -6,  -19,   -4,   18,

            /* bishops: QQ */
              -2,    4,  -23,   -3,   -6,  -25,  -24,  -69,
             -43,  -34,   -2,  -18,   10,  -31,  -20,  -77,
               9,   -3,    2,  -12,    7,  -14,  -40,  -21,
               8,    6,   -7,  -26,  -16,    5,  -16,  -14,
               3,    8,  -22,  -18,  -31,   -4,  -13,   11,
              10,   -7,  -25,  -13,   18,  -18,   13,   11,
             -17,   -5,  -14,   19,  -14,    0,   -2,    6,
              -9,    4,  -15,   11,   22,    5,   27,   68,

            /* rooks: KK */
              28,   23,   15,  -10,  -23,   -4,    1,  -19,
              31,   16,    9,  -10,  -18,  -35,  -17,  -10,
              28,   31,    9,   -9,  -30,  -16,  -25,  -15,
              57,   42,   35,   15,   -3,   29,   18,   16,
              72,   58,   41,   11,   28,   23,   30,   23,
              68,   45,   33,   15,   -4,   11,    9,   20,
              61,   67,   32,   11,    8,   11,   38,   12,
              36,   60,   38,   10,   44,   48,   56,   27,

            /* rooks: KQ */
             -16,  -36,  -40,  -23,  -25,  -29,   15,    6,
              -7,  -51,  -42,  -33,  -19,  -14,   14,    4,
             -11,  -28,  -29,  -28,  -14,  -17,   -4,   -8,
              13,  -10,    3,  -23,  -20,   25,   19,    4,
               1,  -10,    0,   12,  -20,    4,   24,   28,
              -2,  -15,  -28,  -21,  -28,   -9,    3,   17,
               6,   -6,  -35,  -17,  -18,   -8,   20,    8,
              33,   19,  -22,   -4,    2,    7,   45,   12,

            /* rooks: QK */
              16,   -4,   -7,  -39,  -41,  -33,  -46,  -14,
              11,    5,    0,  -27,  -27,  -35,  -42,  -42,
               6,  -10,   -8,  -27,  -17,  -26,  -46,  -53,
               7,   -2,   12,    0,   -4,   -2,  -19,  -18,
              20,   32,    5,    8,    5,   -4,  -14,  -30,
              28,    9,   18,   15,  -15,  -12,  -34,  -15,
              22,   11,    7,   -3,    1,  -16,  -10,   -3,
             -73,   -1,   13,   20,   17,   -2,    0,  -12,

            /* rooks: QQ */
             -11,  -20,  -43,  -70,  -44,  -12,    6,   24,
             -32,  -11,  -21,  -49,  -55,  -55,  -33,   -6,
              18,  -10,  -31,  -51,   -9,  -48,   -6,    8,
              14,  -19,   -7,  -15,  -38,  -23,    5,    6,
               8,   -5,   -2,  -34,  -15,   -4,   22,   18,
              12,    6,  -19,  -28,  -35,   -1,    9,   27,
             -11,   -5,    4,  -26,  -52,  -37,   -1,   21,
              40,   34,   24,   17,   -8,   -5,   29,   29,

            /* queens: KK */
             -17,  -37,  -65,  -49, -120, -118,  -78,  -18,
              13,  -21,  -17,  -41,  -52,  -98,  -82,  -52,
             -21,   -9,   -3,    1,  -18,   17,    2,  -23,
              14,   31,    2,   24,   11,   40,   32,   76,
              21,   23,   58,   50,   66,  103,  111,  121,
              25,   41,   64,   73,   79,   73,  114,  169,
              64,  100,   68,   73,   97,   71,  189,  105,
              46,   58,   21,   50,   52,   50,   81,   90,

            /* queens: KQ */
             -35,  -22,  -37,  -41,  -24,  -41,  -42,    8,
              16,  -16,  -50,  -10,  -27,  -49,  -18,  -69,
               2,   15,  -65,  -16,   -6,   20,   11,  -36,
              52,  -72,    9,   -4,    7,   28,   57,   20,
               1,  -11,    5,  -10,  -19,   14,   40,   47,
              20,   10,   23,   17,   30,   37,   85,   42,
              14,   49,   25,   14,   -3,   52,   94,   64,
              49,   54,   34,   63,   74,   27,   39,   11,

            /* queens: QK */
             -65,  -64,  -99,  -57,  -75,  -55,  -25,   -8,
             -30,  -52,  -76,  -45,  -48,  -41,  -15,   -6,
             -48,  -27,    7,   18,  -34,   -4,  -27,  -19,
             -15,   32,   25,   14,   -8,  -14,  -12,   -6,
              -1,   15,   38,   13,   14,   12,   27,   -9,
              18,   80,   37,   26,   29,   22,   21,  -10,
               7,   38,   61,   11,   27,   11,   25,   21,
              30,   51,   35,   33,   37,   39,   33,   35,

            /* queens: QQ */
             -39,  -23,  -17,  -44,  -36,  -29,  -25,  -12,
              -5,  -45,  -44,  -32,   -5,  -51,  -37,  -58,
               5,   13,   -9,  -30,  -22,  -36,  -34,  -21,
             -18,   -1,   12,  -17,  -40,  -45,  -44,   20,
              26,   49,   21,  -11,   13,  -13,    6,  -25,
              33,   46,   55,   -9,   15,   -7,   20,   45,
              72,   72,   37,   62,   28,    5,   28,   21,
             -29,   55,   51,   58,   -5,   -2,    6,  -13,

            /* kings: KK */
               0,    0,    0,    0,  -23,    8,  -30,  -75,
               0,    0,    0,    0,   14,    9,   -6,  -24,
               0,    0,    0,    0,   30,   29,   15,   -9,
               0,    0,    0,    0,   29,   33,   29,   11,
               0,    0,    0,    0,   19,   -3,   27,   13,
               0,    0,    0,    0,   17,    5,   35,   13,
               0,    0,    0,    0,    5,    7,   52,   11,
               0,    0,    0,    0,    2,   24,   33, -119,

            /* kings: KQ */
               0,    0,    0,    0,    0,   -1,  -49,  -77,
               0,    0,    0,    0,   13,    6,    3,  -37,
               0,    0,    0,    0,   31,   15,   11,   -2,
               0,    0,    0,    0,   37,   40,   41,   12,
               0,    0,    0,    0,   38,   58,   60,   41,
               0,    0,    0,    0,   35,   65,   76,   48,
               0,    0,    0,    0,    3,   11,   39,   26,
               0,    0,    0,    0,    6,   -6,  -26,  -30,

            /* kings: QK */
            -100,  -77,  -42,  -16,    0,    0,    0,    0,
             -72,  -20,  -20,  -12,    0,    0,    0,    0,
             -46,   -3,   -8,   10,    0,    0,    0,    0,
              -2,   19,   25,   19,    0,    0,    0,    0,
              20,   46,   31,   24,    0,    0,    0,    0,
              25,   38,   42,   25,    0,    0,    0,    0,
               2,   19,   27,   15,    0,    0,    0,    0,
             -31,   17,   -3,    8,    0,    0,    0,    0,

            /* kings: QQ */
               8,  -31,  -19,  -18,    0,    0,    0,    0,
             -19,   -7,  -13,  -23,    0,    0,    0,    0,
             -18,   -8,   -6,   -4,    0,    0,    0,    0,
             -19,   10,   22,    9,    0,    0,    0,    0,
               0,   11,    8,   16,    0,    0,    0,    0,
              26,   38,    3,   35,    0,    0,    0,    0,
             -12,   60,   15,   17,    0,    0,    0,    0,
            -123,   41,   -2,    3,    0,    0,    0,    0,

            #endregion

            /* end game mobility weights */

               8, // knights
               5, // bishops
               4, // rooks
               6, // queens

            /* end game squares attacked near enemy king */
              -6, // attacks to squares 1 from king
              -3, // attacks to squares 2 from king
               0, // attacks to squares 3 from king

            /* end game pawn shield/king safety */
              12, // # friendly pawns 1 from king
              17, // # friendly pawns 2 from king
              10, // # friendly pawns 3 from king

            /* end game isolated pawns */
            -8,

            /* end game backward pawns */
            -16,

            /* end game doubled pawns */
            -39,

            /* end game adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               9,   -4,    7,    8,    7,  -20,   15,  -18,
               4,   -3,   23,   22,   -3,   12,    9,  -14,
              15,   16,   53,   65,   45,   15,   20,    5,
              78,   54,   95,   87,   68,   39,   38,   46,
              78,  123,  137,  164,  108,  152,   67,   15,
             271,  380,  367,  419,  427,  278,  326,  255,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game knight on outpost */
            32,

            /* end game bishop on outpost */
            28,

            /* end game bishop pair */
            112,

            /* end game rook on open file */
            4,

            /* end game rook on half-open file */
            33,

            /* end game rook behind passed pawn */
            43,

            /* end game doubled rooks on file */
            13,

            /* end game king on open file */
            8,

            /* end game king on half-open file */
            30,

            /* end game castling rights available */
            -23,

            /* end game castling complete */
            -18,

            /* end game center control */
               6, // D0
               5, // D1

            /* end game queen on open file */
            31,

            /* end game queen on half-open file */
            25,

            /* end game rook on seventh rank */
            31,

            /* end game passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
              22,   40,   22,   24,   -9,    4,   36,    4,
              29,   40,   25,   15,   24,   25,   53,   25,
              77,   71,   60,   37,   38,   51,   91,   75,
             117,  108,   78,   76,   79,   64,   80,   92,
             157,  165,  119,  107,   98,   87,  122,  123,
             153,  183,  161,  155,  162,  171,  204,  173,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               5,    3,   -1,  -26,  -13,    1,   -6,   -4,
              -5,  -11,  -11,  -17,  -15,   -6,   -5,  -10,
             -10,  -24,  -36,  -57,  -36,  -28,  -25,   -6,
             -30,  -36,  -36,  -48,  -44,  -40,  -35,  -22,
             -36,  -70,  -72,  -66,  -76,  -70, -105,  -27,
             -48,  -86,  -93, -123, -158, -122, -152, -133,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game block passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,  // blocked by pawns
               0,  -45,    4,   29,   60,   52,   66,    0,  // blocked by knights
               0,   -2,   42,   62,  104,  116,  173,    0,  // blocked by bishops
               0,   10,  -25,  -33,   -1,    8,  -35,    0,  // blocked by rooks
               0,   -2,   -4,   13,  -13, -125, -195,    0,  // blocked by queens
               0,  -11,   10,   25,   60,   89,  229,    0,  // blocked by kings
        };
    }
}