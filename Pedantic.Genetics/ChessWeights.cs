// ***********************************************************************
// Assembly         : Pedantic.Genetics
// Author           : JoAnn D. Peeler
// Created          : 03-12-2023
//
// Last Modified By : JoAnn D. Peeler
// Last Modified On : 03-28-2023
// ***********************************************************************
// <copyright file="ChessWeights.cs" company="Pedantic.Genetics">
//     Copyright (c) . All rights reserved.
// </copyright>
// <summary>
//     Mapped POCO class for maintaining the weights in the LiteDB 
//     database.
// </summary>
// ***********************************************************************
using Pedantic.Utilities;

namespace Pedantic.Genetics
{
    public sealed class ChessWeights
    {
        public static readonly Guid DEFAULT_IMMORTAL_ID = new("da5e310e-b0dc-4c77-902c-5a46cc81bb73");
        public const int MAX_WEIGHTS = 3884;
        public const int ENDGAME_WEIGHTS = 1942;
        public const int PIECE_WEIGHT_LENGTH = 6;
        public const int PIECE_SQUARE_LENGTH = 1536;
        public const int PIECE_VALUES = 0;
        public const int PIECE_SQUARE_TABLE = 6;
        public const int PIECE_MOBILITY = 1542;
        public const int KING_ATTACK = 1546;
        public const int PAWN_SHIELD = 1549;
        public const int ISOLATED_PAWN = 1552;
        public const int BACKWARD_PAWN = 1553;
        public const int DOUBLED_PAWN = 1554;
        public const int CONNECTED_PAWN = 1555;
        public const int KNIGHT_OUTPOST = 1619;
        public const int BISHOP_OUTPOST = 1620;
        public const int BISHOP_PAIR = 1621;
        public const int ROOK_ON_OPEN_FILE = 1622;
        public const int ROOK_ON_HALF_OPEN_FILE = 1623;
        public const int ROOK_BEHIND_PASSED_PAWN = 1624;
        public const int DOUBLED_ROOKS_ON_FILE = 1625;
        public const int KING_ON_OPEN_FILE = 1626;
        public const int KING_ON_HALF_OPEN_FILE = 1627;
        public const int CASTLING_AVAILABLE = 1628;
        public const int CASTLING_COMPLETE = 1629;
        public const int CENTER_CONTROL = 1630;
        public const int QUEEN_ON_OPEN_FILE = 1632;
        public const int QUEEN_ON_HALF_OPEN_FILE = 1633;
        public const int ROOK_ON_7TH_RANK = 1634;
        public const int PASSED_PAWN = 1635;
        public const int BAD_BISHOP_PAWN = 1699;
        public const int BLOCK_PASSED_PAWN = 1763;
        public const int SUPPORTED_PAWN = 1811;
        public const int KING_OUTSIDE_PP_SQUARE = 1875;
        public const int PP_FRIENDLY_KING_DISTANCE = 1876;
        public const int PP_ENEMY_KING_DISTANCE = 1877;
        public const int PAWN_RAM = 1878;

        public ChessWeights(Guid _id, bool isActive, bool isImmortal, string description, short[] weights, 
            float fitness, int sampleSize, float k, short totalPasses, DateTime updatedOn, DateTime createdOn)
        {
            Id = _id;
            IsActive = isActive;
            IsImmortal = isImmortal;
            Description = description;
            Weights = weights;
            Fitness = fitness;
            SampleSize = sampleSize;
            K = k;
            TotalPasses = totalPasses;
            UpdatedOn = updatedOn;
            CreatedOn = createdOn;
        }

        public ChessWeights(ChessWeights other)
        {
            Id = Guid.NewGuid();
            IsActive = other.IsActive;
            IsImmortal = other.IsImmortal;
            Description = other.Description;
            Weights = ArrayEx.Clone(other.Weights);
            Fitness = other.Fitness;
            SampleSize = other.SampleSize;
            K = other.K;
            TotalPasses = other.TotalPasses;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights(short[] weights)
        {
            Id = Guid.NewGuid();
            IsActive = true;
            IsImmortal = false;
            Description = "Anonymous";
            Weights = ArrayEx.Clone(weights);
            Fitness = 0;
            SampleSize = 0;
            K = 0;
            TotalPasses = 0;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights()
        {
            Id = Guid.NewGuid();
            IsActive = false;
            IsImmortal = false;
            Description = string.Empty;
            Weights = Array.Empty<short>();
            Fitness = default;
            SampleSize = default;
            K = default;
            TotalPasses = default;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public Guid Id { get; set; }
        public bool IsActive { get; set; }
        public bool IsImmortal { get; set; }
        public string Description { get; set; }
        public short[] Weights { get; init; }
        public float Fitness { get; set; }
        public int SampleSize { get; set; }
        public float K { get; set; }
        public short TotalPasses { get; set; }
        public DateTime UpdatedOn { get; set; }

        public DateTime CreatedOn { get; set; }

        public static ChessWeights Empty { get; } = new ChessWeights();

        public static ChessWeights CreateParagon()
        {
            ChessWeights paragon = new(paragonWeights)
            {
                Id = DEFAULT_IMMORTAL_ID,
                IsImmortal = true,
                Fitness = 0,
                SampleSize = 0,
                K = 0,
                TotalPasses = 0,
                UpdatedOn = DateTime.UtcNow
            };
            return paragon;
        }

        public static bool LoadParagon(out ChessWeights paragon)
        {
            var rep = new ChessDb();
            ChessWeights? p = rep.Weights.GetAll().FirstOrDefault(w => w.IsActive && w.IsImmortal);
            if (p == null)
            {
                p = CreateParagon();
                rep.Weights.Insert(p);
                rep.Save();
                paragon = p;
            }
            else
            {
                paragon = p;
            }
            return true;
        }

        // Solution sample size: 12000000, generated on Mon, 11 Sep 2023 01:54:21 GMT
        // Solution error: 0.118663, accuracy: 0.5179, seed: -1917137492
        private static readonly short[] paragonWeights =
        {
            /*------------------- OPENING WEIGHTS -------------------*/

            /* opening piece values */
            98, 440, 488, 602, 1457, 0,

            /* opening piece square values */

            #region opening piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
             -29,  -30,  -33,   -5,  -39,   47,   43,  -11,
             -28,  -24,  -37,  -51,  -33,  -11,    6,  -37,
              -6,   -7,    3,  -13,   12,   23,    5,    1,
              14,   -8,   18,   42,   50,   37,   42,   57,
              18,   34,   14,   41,   97,  119,  140,   77,
             107,   74,   62,   82,   82,  100,   60,   55,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -42,  -63,  -53,  -58,  -36,   32,   40,   -2,
             -28,  -56,  -48,  -55,  -28,  -21,   10,  -25,
             -21,   -4,   -9,  -11,    2,   -5,   -7,   20,
              -1,   13,   16,   36,   14,  -12,   13,   61,
              79,  118,  121,   53,   90,    8,   30,   34,
             122,   31,   77,   44,  115,   73,  145,  150,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
               7,   19,    2,  -27,  -50,   -7,  -29,  -50,
              18,   20,  -29,  -37,  -41,  -14,  -35,  -70,
              32,   25,    2,  -13,   -7,    8,  -13,  -21,
              56,   -4,   20,   48,   33,   20,   13,   21,
              40,   30,   26,   45,  109,  109,   89,   16,
             135,  170,  112,  125,  102,  113,   65,   35,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -34,   -3,   24,    3,  -13,    7,   -9,  -11,
             -17,  -22,  -26,  -47,  -15,  -28,  -29,  -49,
              -2,  -15,   15,   -4,   16,   20,   -3,  -13,
              79,   48,   54,   57,   28,    5,   13,   36,
             142,   79,  141,   69,   33,   11,  -22,   28,
             148,   62,  122,   52,  120,   43,  175,  122,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
            -105,  -22,  -47,  -30,   -4,   -4,  -18,  -59,
             -44,  -52,   -8,    8,    8,   21,   -7,   -1,
             -25,  -11,   -6,   15,   25,    1,    3,   -1,
             -12,    5,    9,    9,   19,   31,   30,   11,
               3,   -8,   23,   30,   -5,   12,  -23,   54,
             -24,   36,   41,   60,   92,  147,   45,  -20,
              -2,  -19,   23,   57,   33,  121,   26,   -5,
            -249,  -12,  -12,   58,   43, -102,   14, -203,

            /* knights: KQ */
             -85,  -45,  -60,  -52,  -30,  -35,  -28,  -19,
             -55,  -37,   -7,   10,  -11,   13,  -70,  -41,
             -51,   -9,  -17,   21,   13,    7,  -32,  -25,
              -2,   34,   21,   34,   29,    8,   12,  -14,
              43,  -11,   31,   45,   53,   49,   16,    9,
              36,   44,   98,   76,   57,   52,  -18,  -21,
             -15,   10,    7,   78,   24,   42,  -18,  -42,
            -256,  -30,   -2,   55,  -62,  -17,  -39, -106,

            /* knights: QK */
             -92,  -57,  -47,  -55,  -25,  -19,  -51, -101,
             -40,  -40,   11,   -8,  -11,   -2,  -53,   -9,
             -21,  -10,   10,   34,   62,  -25,   -5,  -51,
              24,   37,   27,   22,   38,   16,   22,  -20,
              20,   26,   54,  104,   48,   53,   22,   57,
             -10,   15,   47,   72,   83,  125,   39,   18,
             -26,    1,   33,   74,   -1,   82,   28,   54,
            -152,  -45,  -29,   28,   11,  -67,  -63,  -60,

            /* knights: QQ */
              -3,  -35,   10,  -74,  -46,  -54,  -37,  -82,
             -29,  -28,   -8,   10,  -28,    8,   -8, -135,
              14,    1,   10,   20,   27,  -29,  -25,  -29,
              11,   11,   43,   40,   28,   27,   30,  -34,
              25,  -15,   17,   56,   43,   35,   24,    2,
              78,  -16,   36,  102,   47,   42,   58,  -16,
              -7,   49,   15,   11,   54,   71,   -3,  -46,
            -144,    5,  -13,    3,  -31,   50,   11,  -74,

            /* bishops: KK */
               7,   11,   -4,  -28,    1,   -1,    1,  -12,
              12,   14,   10,    3,    5,   20,   38,   28,
              -3,    6,   18,    6,    9,    7,   14,    6,
             -13,  -10,    0,   35,   23,   -4,   -9,   21,
              -7,   -8,   -7,   34,   11,   27,   -8,  -16,
               0,    9,   -4,   -6,    4,   75,   40,  -10,
             -49,  -26,  -17,  -31,  -37,   -5,  -51,  -57,
             -82,  -60,  -46,  -38,  -43,  -71,  -16,  -75,

            /* bishops: KQ */
             -54,    4,  -30,  -46,   -5,    0,   39,  -23,
             -35,   -9,  -21,   -2,   -2,   34,   59,   10,
             -21,  -10,   17,    8,   16,   33,   38,   27,
              11,   -3,   -5,   42,   62,   24,    1,  -20,
             -11,   15,    8,   75,   71,    5,   12,   -6,
             -24,   88,   65,    5,   31,   38,   14,    7,
             -49,   14,    0,  -23,   -1,  -14,  -13,  -52,
             -16,  -54,   37,   -2,  -14,   -3,  -51,  -46,

            /* bishops: QK */
              13,   29,   16,  -27,  -24,  -33,  -31, -105,
              43,   50,   29,   21,  -12,  -23,  -37,  -16,
               7,   30,   34,   21,    7,    3,    4,  -11,
              -7,   20,    8,   71,   53,   -7,  -18,  -20,
             -17,    9,   23,   62,   37,   27,   13,   -8,
             -36,    9,   19,   26,   42,   61,   60,    7,
             -36,  -30,  -40,  -37,  -35,    2,  -15,  -29,
             -61,  -70,  -15,  -41,   14,  -33,   37,  -59,

            /* bishops: QQ */
             -68,  -35,    0,  -72,  -25,  -29,   11,  -22,
              28,   47,  -33,   10,  -43,   24,  -15,   63,
              13,   18,   24,   -2,   16,    4,   39,   -2,
              46,   24,   -4,   48,   22,   46,   -1,    6,
              18,   -1,    3,   49,   60,   -9,    6,   -9,
             -38,   66,   57,   41,   16,   38,  -32,   -8,
             -55,   18,   30,    4,   36,  -42,   29,  -28,
             -48,  -48,  -22,   18,  -22,  -22,   24,  -36,

            /* rooks: KK */
             -18,   -7,   -7,    4,   14,   12,   22,  -13,
             -39,  -17,  -20,   -9,   -7,   14,   34,  -10,
             -42,  -40,  -34,  -19,    2,   -2,   28,    1,
             -35,  -31,  -20,  -14,  -18,  -34,   20,  -23,
             -10,  -10,   -3,   26,  -13,   25,   56,   18,
               3,   48,   49,   56,   76,  138,  136,   66,
             -17,  -19,   10,   27,   14,   84,   72,  118,
              93,   78,   50,   73,   45,  103,   99,  109,

            /* rooks: KQ */
             -23,   15,    0,   -4,   -8,    3,  -17,  -27,
             -43,    8,  -25,  -26,  -24,  -32,  -42,  -24,
             -22,   -9,  -29,   -6,  -47,  -19,    0,  -30,
             -53,  -12,  -54,    0,  -11,  -58,  -14,    9,
             -12,   44,  -24,    0,   33,    8,   19,    4,
              72,   84,   57,   59,   57,   44,  104,   54,
               6,   44,   57,   12,   45,    2,   41,   63,
              46,   58,   34,   18,   27,   59,   68,   93,

            /* rooks: QK */
             -60,   -3,  -12,    0,    3,    4,   20,  -17,
             -13,  -31,  -36,  -23,  -36,  -40,   -6,  -14,
             -17,    2,  -30,  -30,  -57,  -67,   -6,  -11,
              10,   36,  -43,  -31,  -40,  -34,   21,   -2,
              46,   15,   44,   -3,  -10,    2,   18,   10,
              50,  108,   59,    9,   54,  112,   97,   61,
              25,   44,   46,    9,  -24,   67,   47,   34,
             156,  105,   75,   57,   30,   82,   88,   95,

            /* rooks: QQ */
             -36,  -16,    7,   13,   -1,   -2,  -19,  -25,
             -22,  -38,  -27,   -7,  -41,  -34,  -14,  -10,
             -72,   11,    0,  -30,  -34,  -33,  -35,  -32,
             -21,   17,  -33,  -29,  -45,  -10,  -46,   -7,
              14,   38,  -17,   77,   23,   36,    0,   24,
              80,  105,  105,  120,   51,   47,   44,   31,
              56,   80,   43,   69,  104,   58,   20,   17,
              66,   48,   12,  -17,   -1,   80,   81,   61,

            /* queens: KK */
               2,   10,   19,   23,   43,   25,  -59,  -27,
             -10,   19,   15,   22,   23,   47,   35,    0,
             -15,    1,    1,  -11,    9,   -4,    9,    5,
              -5,  -28,  -20,  -24,  -20,  -21,   -1,  -34,
              -7,  -16,  -51,  -45,  -39,  -42,  -24,  -30,
             -10,    2,  -36,  -53,  -16,   76,   27,    3,
             -30,  -58,  -32,  -32,  -53,   59,    4,   77,
             -20,   17,    8,  -15,   42,   57,  122,   75,

            /* queens: KQ */
              13,   10,   13,   14,   12,  -15,  -25,  -16,
              23,   19,   26,    8,    8,    1,  -48,  -56,
               9,    4,   15,    0,    1,    6,   -2,  -23,
              -7,   30,  -31,  -16,   -4,  -10,  -12,   -6,
              -3,    9,  -38,  -31,   17,   -9,   -3,    8,
              41,   73,   52,   20,   23,   27,   33,    8,
              38,   74,   74,   78,   15,   -3,    4,   38,
              63,  133,   73,   91,   21,   47,   38,    0,

            /* queens: QK */
             -74,  -78,  -15,   -3,   -4,  -10,  -18,  -25,
             -45,  -47,   16,    7,    5,   -6,   30,   -2,
             -38,  -17,   -8,  -14,    5,  -28,    1,   -9,
             -29,  -47,  -35,  -30,  -25,  -19,    3,  -24,
             -11,  -26,  -36,  -41,  -43,    3,  -24,  -20,
             -11,    4,   -8,  -33,   28,   57,   25,   18,
             -22,    2,  -31,   -9,  -18,    5,   48,   46,
             -19,  -10,   24,   14,  -32,   87,   77,   47,

            /* queens: QQ */
             -52,  -47,  -25,  -32,   10,    2,  -33,  -45,
             -58,  -30,   18,   22,  -17,  -13,   11,  -23,
               0,   -4,   21,   -3,   -2,   -9,   -5,  -15,
             -26,   10,  -34,   -1,   -4,    0,   -6,   -5,
             -25,  -11,   31,   50,   55,    5,   -8,   15,
              37,   58,  101,   78,   29,  -13,  -16,   11,
             100,   90,  101,   47,   18,    7,   18,  -35,
              11,   60,   20,   48,   27,   13,   47,   28,

            /* kings: KK */
               0,    0,    0,    0,  -39,  -66,   14,    4,
               0,    0,    0,    0,   -7,    4,   27,    8,
               0,    0,    0,    0,   32,   -1,  -10,  -50,
               0,    0,    0,    0,  122,   82,   43,  -68,
               0,    0,    0,    0,  199,  216,  153,   43,
               0,    0,    0,    0,  233,  331,  253,  144,
               0,    0,    0,    0,  237,  141,  185,   71,
               0,    0,    0,    0,   51,   88,   70,  -20,

            /* kings: KQ */
               0,    0,    0,    0,  -64,  -88,   15,   -2,
               0,    0,    0,    0,    4,    5,    9,    8,
               0,    0,    0,    0,    1,    8,    8,  -31,
               0,    0,    0,    0,   97,   52,    5,  -37,
               0,    0,    0,    0,  161,  109,   94,   10,
               0,    0,    0,    0,  156,  133,   78,   38,
               0,    0,    0,    0,  224,  231,  104,   36,
               0,    0,    0,    0,   84,  107,  183,   40,

            /* kings: QK */
             -17,    8,  -35, -109,    0,    0,    0,    0,
              10,   -5,  -24,  -42,    0,    0,    0,    0,
             -37,  -27,    4,  -29,    0,    0,    0,    0,
             -39,   56,   42,   63,    0,    0,    0,    0,
              -3,   79,   56,  111,    0,    0,    0,    0,
              36,   97,  129,  118,    0,    0,    0,    0,
              53,  139,  113,  103,    0,    0,    0,    0,
             -25,   40,  181,   82,    0,    0,    0,    0,

            /* kings: QQ */
             -69,   -4,  -51, -100,    0,    0,    0,    0,
             -19,  -10,    5,  -33,    0,    0,    0,    0,
             -41,    2,    4,    8,    0,    0,    0,    0,
              -3,   62,   74,  110,    0,    0,    0,    0,
              58,  122,  168,  155,    0,    0,    0,    0,
              84,  224,  202,  162,    0,    0,    0,    0,
               5,   44,   77,  146,    0,    0,    0,    0,
              -8,   41,   53,  128,    0,    0,    0,    0,

            #endregion

            /* opening mobility weights */

               9, // knights
               5, // bishops
               2, // rooks
              -1, // queens

            /* opening squares attacked near enemy king */
              24, // attacks to squares 1 from king
              21, // attacks to squares 2 from king
               7, // attacks to squares 3 from king

            /* opening pawn shield/king safety */
              24, // # friendly pawns 1 from king
              10, // # friendly pawns 2 from king
               6, // # friendly pawns 3 from king

            /* opening isolated pawns */
            -7,

            /* opening backward pawns */
            7,

            /* opening doubled pawns */
            -15,

            /* opening adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              13,   -2,    4,   16,   24,   -3,  -17,    0,
               7,   18,   12,   25,   47,   13,    9,   14,
              -2,   12,    3,   28,   42,   32,   22,   21,
               8,   43,   42,   25,   97,  105,   26,   27,
              90,  134,  150,  242,  206,  244,  171,  133,
             201,  304,  247,  307,  367,  257,  117,   53,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening knight on outpost */
            7,

            /* opening bishop on outpost */
            17,

            /* opening bishop pair */
            40,

            /* opening rook on open file */
            39,

            /* opening rook on half-open file */
            12,

            /* opening rook behind passed pawn */
            -2,

            /* opening doubled rooks on file */
            8,

            /* opening king on open file */
            -72,

            /* opening king on half-open file */
            -31,

            /* opening castling rights available */
            30,

            /* opening castling complete */
            16,

            /* opening center control */
               2, // D0
               4, // D1

            /* opening queen on open file */
            -10,

            /* opening queen on half-open file */
            9,

            /* opening rook on seventh rank */
            32,

            /* opening passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
             -18,  -19,  -16,  -27,    6,  -15,  -11,   33,
             -10,    0,  -13,   -9,  -29,  -37,  -38,   12,
             -31,  -36,  -43,   -5,  -38,  -48,  -73,  -30,
              -5,   30,    2,  -21,  -20,   27,   26,  -15,
              70,   72,   65,   36,   -2,  106,   55,   45,
             150,  199,  164,  189,  165,  176,  156,  162,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              -6,   -4,   -8,  -15,  -14,  -24,  -14,    0,
              -9,   -9,  -16,  -12,  -16,  -19,  -14,   -8,
              -8,    4,    2,   -3,  -16,   -8,   -1,   -2,
               5,   10,    2,    3,   -4,   -9,    3,    4,
              26,    5,   30,   14,   28,   -3,   41,   -5,
              49,   61,   55,   50,   48,   62,   30,   88,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening block passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,  // blocked by pawns
               0,   57,   66,   62,   67,   83,   85,    0,  // blocked by knights
               0,   32,   26,   25,   17,   66,   97,    0,  // blocked by bishops
               0,  -38,  -18,  -25,  -19,   36,  177,    0,  // blocked by rooks
               0,   19,   49,   13,    9,   17,  -90,    0,  // blocked by queens
               0,   14,   86,   78,  115,  214,  237,    0,  // blocked by kings

            /* opening supported pawn chain */
               0,    0,    0,    0,    0,    0,    0,    0,
               0,    0,    0,    0,    0,    0,    0,    0,
              22,   29,   44,   57,   39,   39,   31,   59,
              -9,   15,   20,   30,   30,   21,   35,   11,
             -24,   27,   67,   47,   62,   61,   29,   36,
              70,  137,  138,  164,  181,   92,   90,  101,
             151,  221,  282,  228,  286,  162,  262,  -47,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening king outside passed pawn square */
            73,

            /* opening passed pawn/friendly king distance penalty */
            9,

            /* opening passed pawn/enemy king distance bonus */
            -6,

            /* opening pawn rams */
               0,    0,    0,    0,    0,    0,    0,    0,
              10,   22,   19,   11,   59,  -19,    3,    3,
              12,   -2,   32,   36,   18,    0,    4,   20,
               0,    0,    0,    0,    0,    0,    0,    0,
              -8,  -15,  -25,  -19,  -19,    5,  -23,  -35,
             -22,  -15,  -26,    4,  -73,    0,   14,  -15,
               0,    0,    0,    0,    0,    0,    0,    0,
               0,    0,    0,    0,    0,    0,    0,    0,


            /*------------------- END GAME WEIGHTS -------------------*/

            /* end game piece values */
            148, 474, 536, 929, 1611, 0,

            /* end game piece square values */

            #region end game piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
              -5,   -4,    5,  -36,   24,    7,   -3,  -27,
             -15,  -20,  -24,  -17,  -15,   -7,   -6,  -15,
              -3,   -8,  -32,  -45,  -34,  -16,    1,  -14,
              43,   23,   13,   -7,  -25,  -18,   12,    4,
              23,   45,   50,   46,   52,    1,   17,   36,
              74,   74,  101,   36,   57,   22,   74,   38,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
              11,   33,   30,   47,  -11,  -13,  -18,  -12,
             -18,    5,  -15,  -23,  -34,  -13,  -18,  -13,
              18,    3,   -8,  -27,  -25,   -6,   -4,  -21,
              59,    9,    9,   12,    6,   35,   32,   22,
               9,  -12,  -29,   44,   95,  100,  104,  113,
              24,   34,   16,   64,  117,  170,  154,  134,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
              -3,    3,    6,   19,   12,    9,   16,   22,
              -6,  -14,  -13,  -23,  -10,  -17,   -7,    4,
               7,    6,   -1,  -21,  -12,  -14,   -8,   -4,
              54,   62,   51,   22,   -3,  -13,    9,   24,
              62,  113,  111,   86,   50,  -11,   22,   66,
              75,  100,  165,   95,   52,   16,   36,   52,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
               2,    6,   -4,    6,  -11,  -21,  -20,  -18,
              -5,    4,  -14,  -26,  -32,  -35,  -30,  -23,
              17,   13,  -18,  -21,  -37,  -43,  -22,  -25,
              23,   13,    1,   13,  -11,  -16,   -8,    4,
             -32,    5,  -34,   36,   66,   32,   46,   62,
              12,   52,   -5,   47,   28,   91,   73,   72,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
             -68,  -99,  -36,  -15,  -30,  -27,  -37,  -72,
             -52,   -4,  -29,  -34,  -21,   -5,  -12,  -16,
             -43,  -13,    0,   19,   15,   -8,    3,    5,
               3,   18,   40,   48,   53,   37,   44,   10,
              16,   20,   21,   48,   51,   69,   77,   20,
              34,   11,   18,   13,    8,   -1,   35,   35,
              11,   29,   19,   34,   45,  -21,   -3,   16,
             -16,   26,   19,   21,   29,   14,   31,  -87,

            /* knights: KQ */
            -105,  -40,   -3,    8,  -15,  -16,   -3, -135,
             -30,    3,  -30,  -26,  -11,   -3,   17,  -15,
              -2,  -30,    9,   -4,   -2,  -36,   25,   20,
               2,  -14,   23,   14,   13,   23,   15,   18,
             -37,  -14,    7,   -2,    1,    0,    0,    0,
             -20,  -49,  -44,  -19,   -6,    8,   37,   19,
             -29,  -30,  -38,  -14,   -2,    6,   14,   11,
            -129,  -43,  -32,   -5,   -6,   39,   36,  -52,

            /* knights: QK */
            -101,   -4,   13,   31,  -10,  -26,  -41,  -65,
             -67,   15,  -15,   -6,   -2,    4,   -1,  -67,
              11,  -13,  -12,   15,  -17,   10,  -15,  -44,
              15,   11,   18,   43,    7,   30,    1,   -1,
              22,   14,   18,   -5,   16,   10,   -2,  -15,
              44,   31,   23,   -6,    1,  -21,   -1,   -5,
              34,   10,   26,   39,   23,  -14,  -35,  -28,
             -48,   25,   36,   -7,   18,  -21,  -32, -106,

            /* knights: QQ */
             -98,  -10,  -11,   18,   10,   10,  -70,  -94,
             -23,   32,  -24,  -11,   -7,  -50,   -5,  -17,
             -15,  -17,  -18,    1,   -3,   -5,    8,  -39,
              47,   14,   17,    3,    0,   -2,   13,   20,
              16,   23,    3,   -5,    3,   -6,   -9,   11,
              -9,    7,  -19,  -13,  -17,   16,  -15,  -10,
              42,   -6,    4,   46,   26,    8,   25,   25,
             -86,   56,   30,   41,   -2,   28,   52,  -40,

            /* bishops: KK */
             -42,  -49,  -41,    7,   -5,    1,  -27,  -70,
             -31,  -26,  -18,   -1,   -4,   -8,  -31,  -77,
             -13,   12,   30,   14,   40,   14,  -12,  -19,
              10,   30,   41,   21,   11,   27,    5,  -36,
              25,   12,   23,   12,   21,   12,   19,   28,
               6,   24,   17,   17,   28,   27,   17,   47,
              40,   29,   28,   38,   39,   18,   13,    7,
              48,   51,   45,   50,   42,   26,    0,   23,

            /* bishops: KQ */
               1,  -10,    5,   12,   -7,  -21,  -57,  -81,
             -11,   -6,   18,    3,   -3,  -27,  -17,  -68,
              -4,   12,   21,   13,   19,    0,  -10,  -24,
              21,   21,    8,   -6,   -5,   33,   23,   27,
              24,   -5,    5,  -42,    0,   27,   23,   17,
              -3,  -30,   -6,   11,   13,    8,   34,   24,
             -37,  -18,    5,   19,    5,   20,   38,   53,
               9,   13,   -7,   19,   21,   23,   48,   28,

            /* bishops: QK */
             -59,  -46,  -10,   14,   14,   -9,   14,  -30,
             -58,  -17,    6,    3,    3,   12,   -7,  -24,
              -4,    7,   13,   17,   37,   -2,   -4,  -24,
              -5,   18,   38,   -6,  -18,   28,   22,   22,
              37,   14,   16,    1,    2,   19,   -7,   18,
              37,   38,   19,   26,   29,   22,  -21,   15,
              36,   25,   49,   49,   33,   21,  -13,  -42,
              41,   36,   32,   47,    3,   -5,    2,   22,

            /* bishops: QQ */
             -16,  -11,  -20,   -3,   -9,  -29,  -36,  -84,
             -71,  -34,   -3,  -10,    9,  -37,  -25,  -90,
             -17,   -9,  -12,   -9,    3,   -8,  -43,  -23,
              -5,    0,   -5,  -27,  -16,   -5,  -12,  -14,
               1,  -11,  -14,  -24,  -41,   -7,  -23,   -1,
               1,   -7,  -14,   -6,    1,  -17,    7,    2,
             -12,  -17,  -12,   13,  -14,    2,   -3,   15,
              -4,    9,    0,   16,   33,    7,   17,   45,

            /* rooks: KK */
              33,   27,   11,   -8,  -22,   -1,   -1,  -16,
              31,   21,   12,  -10,  -15,  -36,  -15,   -7,
              32,   36,   13,   -6,  -31,  -17,  -24,  -11,
              62,   50,   34,   15,   -5,   27,   14,   13,
              74,   62,   44,   17,   33,   19,   22,   24,
              73,   51,   33,    8,    0,    1,   15,   22,
              65,   72,   33,   14,   21,   14,   47,   15,
              40,   60,   43,   10,   45,   42,   60,   35,

            /* rooks: KQ */
             -11,  -21,  -34,  -27,  -23,  -21,   25,   15,
              -5,  -45,  -33,  -25,  -15,   -3,   21,    3,
             -15,  -30,  -37,  -53,  -19,  -20,   -6,   -1,
               9,  -21,   -3,  -31,  -21,   25,   19,   -3,
              11,  -10,    8,    7,  -11,   10,   19,   26,
               6,  -11,  -28,  -22,  -24,    6,   -8,   17,
              14,    5,  -33,   -3,   -9,    1,   17,    6,
              28,   20,    1,    3,    1,   10,   40,    3,

            /* rooks: QK */
              25,    3,    0,  -31,  -41,  -41,  -46,  -12,
              -3,   -3,    4,  -23,  -34,  -34,  -37,  -25,
              -3,    3,   -7,  -23,   -9,  -14,  -50,  -49,
              -2,   -5,   18,   -2,   -5,   -9,  -15,  -13,
               9,   35,    2,   16,   -5,    0,    3,  -13,
              22,    4,   14,   17,  -11,  -15,   -6,    1,
              15,   14,    6,   10,   13,   -8,    7,    9,
             -69,    0,    9,   14,   18,   -9,    6,   -3,

            /* rooks: QQ */
             -16,  -15,  -45,  -63,  -50,  -28,    2,   20,
             -41,   -6,  -32,  -59,  -49,  -47,  -35,   -4,
               0,  -26,  -52,  -40,  -24,  -46,   -8,    1,
              -5,   -8,   -4,  -18,  -33,  -27,    4,    8,
               7,  -12,    7,  -34,  -15,  -16,   14,   11,
             -14,   -3,  -15,  -47,  -25,   -2,   12,   15,
              -1,   -2,    3,  -31,  -47,  -41,    8,   20,
              20,   31,   17,   30,   -9,  -13,   28,   15,

            /* queens: KK */
              -4,  -30,  -69,  -52, -111, -145,  -59,  -17,
              10,  -24,  -26,  -43,  -50,  -98,  -95,  -40,
              -4,  -16,    5,    1,   -9,   11,    8,  -25,
              21,   38,   23,   31,   15,   49,   34,   83,
              18,   38,   65,   54,   66,  115,  121,  138,
              27,   64,   68,   86,   86,   79,  126,  140,
              77,  120,   87,   72,  102,   62,  195,  120,
              53,   46,   48,   75,   56,   77,   85,  107,

            /* queens: KQ */
               1,    4,  -46,  -30,  -16,  -50,  -45,    3,
              28,  -17,  -41,  -17,   -6,  -60,  -34,  -47,
              12,  -12,  -42,  -10,   13,   38,   -1,  -40,
              30,  -43,   25,  -12,   -4,   17,   30,   28,
              20,   -1,   28,    7,   -7,   24,   48,   48,
               8,   19,   21,    7,   24,   40,   61,   50,
              41,   25,    8,   10,   25,   75,   74,   34,
              61,   44,   57,   41,   74,   42,   42,   19,

            /* queens: QK */
             -58,  -47, -107,  -63,  -69,  -48,  -31,    1,
             -65,  -67,  -71,  -29,  -39,  -36,  -48,   17,
             -62,  -18,   -3,   -5,  -34,   -1,  -28,   21,
             -11,   25,   37,   28,    5,    2,  -13,    9,
              18,   20,   49,   41,   33,   11,   36,   18,
               6,   66,   36,   47,   12,   17,   41,   24,
               8,   25,   62,   19,   28,   24,   26,   41,
              35,   55,   32,   27,   33,   43,   41,   50,

            /* queens: QQ */
             -89,  -69,   -7,  -35,  -18,  -42,  -31,  -23,
             -13,  -47,  -30,  -29,   -3,  -49,  -53,  -25,
               0,   18,  -50,  -22,  -37,  -23,  -20,  -37,
             -26,   36,   27,  -28,  -23,  -69,  -48,   -7,
              17,   23,    1,  -29,   -8,   -6,    1,  -43,
              39,   19,   70,  -16,   -3,   18,   25,   69,
              27,   47,   17,   47,   23,   -2,   32,   18,
               0,   53,   48,   26,   10,   -3,  -10,  -12,

            /* kings: KK */
               0,    0,    0,    0,  -25,    6,  -26,  -57,
               0,    0,    0,    0,    2,    4,   -4,  -10,
               0,    0,    0,    0,   11,   16,   12,    2,
               0,    0,    0,    0,   10,   23,   20,   21,
               0,    0,    0,    0,   -2,   -8,   14,   13,
               0,    0,    0,    0,   -3,  -19,   23,   20,
               0,    0,    0,    0,    2,   15,   51,   21,
               0,    0,    0,    0,   25,   36,   46, -131,

            /* kings: KQ */
               0,    0,    0,    0,   -6,    0,  -43,  -50,
               0,    0,    0,    0,  -10,   -9,    0,  -16,
               0,    0,    0,    0,   11,    5,    9,   -6,
               0,    0,    0,    0,   10,   33,   46,   37,
               0,    0,    0,    0,   12,   42,   47,   54,
               0,    0,    0,    0,   25,   49,   64,   63,
               0,    0,    0,    0,    5,   13,   43,   37,
               0,    0,    0,    0,   13,   11,  -23,  -13,

            /* kings: QK */
             -74,  -68,  -49,  -19,    0,    0,    0,    0,
             -46,  -19,  -25,  -20,    0,    0,    0,    0,
             -22,    2,  -16,   -3,    0,    0,    0,    0,
              26,   13,   13,    4,    0,    0,    0,    0,
              26,   39,   35,    8,    0,    0,    0,    0,
              44,   49,   31,   21,    0,    0,    0,    0,
              23,   30,   28,   27,    0,    0,    0,    0,
               9,   37,    9,   26,    0,    0,    0,    0,

            /* kings: QQ */
              19,  -24,   -8,  -15,    0,    0,    0,    0,
              -7,  -10,  -22,  -26,    0,    0,    0,    0,
              -7,  -11,  -15,  -14,    0,    0,    0,    0,
              -4,    8,   10,   -5,    0,    0,    0,    0,
               3,   17,    4,    0,    0,    0,    0,    0,
              26,   19,   -8,   15,    0,    0,    0,    0,
              -1,   76,   35,   12,    0,    0,    0,    0,
            -147,   57,   21,   14,    0,    0,    0,    0,

            #endregion

            /* end game mobility weights */

              10, // knights
               5, // bishops
               4, // rooks
               5, // queens

            /* end game squares attacked near enemy king */
              -6, // attacks to squares 1 from king
              -3, // attacks to squares 2 from king
               0, // attacks to squares 3 from king

            /* end game pawn shield/king safety */
              16, // # friendly pawns 1 from king
              20, // # friendly pawns 2 from king
              16, // # friendly pawns 3 from king

            /* end game isolated pawns */
            -11,

            /* end game backward pawns */
            4,

            /* end game doubled pawns */
            -36,

            /* end game adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               6,   -4,   -1,   29,   12,  -16,    8,  -20,
              18,  -15,   40,   19,   11,    2,   11,  -27,
               7,   20,   53,   67,   36,   28,   11,    5,
              53,   69,   67,  104,   61,   47,   41,   50,
              80,  120,  197,  140,  102,  153,   65,   28,
             198,  379,  375,  415,  483,  293,  316,  211,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game knight on outpost */
            34,

            /* end game bishop on outpost */
            32,

            /* end game bishop pair */
            114,

            /* end game rook on open file */
            2,

            /* end game rook on half-open file */
            33,

            /* end game rook behind passed pawn */
            44,

            /* end game doubled rooks on file */
            13,

            /* end game king on open file */
            7,

            /* end game king on half-open file */
            28,

            /* end game castling rights available */
            -32,

            /* end game castling complete */
            -16,

            /* end game center control */
               7, // D0
               5, // D1

            /* end game queen on open file */
            35,

            /* end game queen on half-open file */
            26,

            /* end game rook on seventh rank */
            28,

            /* end game passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
              36,   40,   20,   36,    9,   18,   42,   16,
              44,   47,   37,   34,   37,   38,   60,   30,
             -18,    5,    9,   -3,    5,   10,   35,    8,
              12,   25,   21,   18,   48,   34,   38,   34,
             101,  102,   87,   64,   55,   66,   89,   48,
              95,  129,  134,  141,  146,  124,  128,   97,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               7,    1,   -4,  -34,   -7,    2,   -9,   -7,
              -8,   -6,  -12,  -11,  -19,   -4,  -10,   -6,
             -13,  -27,  -42,  -59,  -39,  -34,  -26,   -5,
             -26,  -40,  -37,  -49,  -43,  -29,  -40,  -24,
             -32,  -50,  -64,  -62,  -69,  -51,  -92,  -21,
             -40,  -77,  -82,  -99, -143, -116, -122, -115,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game block passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,  // blocked by pawns
               0,  -14,    6,   18,   46,   43,   68,    0,  // blocked by knights
               0,    0,   49,   54,  103,  119,  167,    0,  // blocked by bishops
               0,   13,  -26,  -22,   -1,   -9,  -45,    0,  // blocked by rooks
               0,  -38,   -3,   16,  -17, -123, -181,    0,  // blocked by queens
               0,    2,    7,  -70,  -32,    8,  131,    0,  // blocked by kings

            /* end game supported pawn chain */
               0,    0,    0,    0,    0,    0,    0,    0,
               0,    0,    0,    0,    0,    0,    0,    0,
              15,   26,   35,   35,   39,   20,   11,    1,
               7,   29,   15,   30,   11,   13,    4,   -1,
              20,   28,   35,   36,   32,   18,   25,    6,
              52,   42,   92,   73,   68,   74,   33,    9,
              85,   83,  147,   59,  121,  137,   37,  106,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game king outside passed pawn square */
            195,

            /* end game passed pawn/friendly king distance penalty */
            -19,

            /* end game passed pawn/enemy king distance bonus */
            42,

            /* end game pawn rams */
               0,    0,    0,    0,    0,    0,    0,    0,
              -7,   25,   -5,   43,  -13,   10,    9,   29,
              17,   26,   20,   29,    7,    4,   -2,  -11,
               0,    0,    0,    0,    0,    0,    0,    0,
             -13,   -5,   -5,  -29,  -16,   -2,   -9,  -10,
               1,   -4,  -27,  -49,  -68,  -10,   -7,   -1,
               0,    0,    0,    0,    0,    0,    0,    0,
               0,    0,    0,    0,    0,    0,    0,    0,
        };
    }
}