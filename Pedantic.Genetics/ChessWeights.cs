// ***********************************************************************
// Assembly         : Pedantic.Genetics
// Author           : JoAnn D. Peeler
// Created          : 03-12-2023
//
// Last Modified By : JoAnn D. Peeler
// Last Modified On : 03-28-2023
// ***********************************************************************
// <copyright file="ChessWeights.cs" company="Pedantic.Genetics">
//     Copyright (c) . All rights reserved.
// </copyright>
// <summary>
//     Mapped POCO class for maintaining the weights in the LiteDB 
//     database.
// </summary>
// ***********************************************************************
using Pedantic.Utilities;

namespace Pedantic.Genetics
{
    public sealed class ChessWeights
    {
        public static readonly Guid DEFAULT_IMMORTAL_ID = new("da5e310e-b0dc-4c77-902c-5a46cc81bb73");
        public const int MAX_WEIGHTS = 3526;
        public const int ENDGAME_WEIGHTS = 1763;
        public const int PIECE_WEIGHT_LENGTH = 6;
        public const int PIECE_SQUARE_LENGTH = 1536;
        public const int PIECE_VALUES = 0;
        public const int PIECE_SQUARE_TABLE = 6;
        public const int PIECE_MOBILITY = 1542;
        public const int KING_ATTACK = 1546;
        public const int PAWN_SHIELD = 1549;
        public const int ISOLATED_PAWN = 1552;
        public const int BACKWARD_PAWN = 1553;
        public const int DOUBLED_PAWN = 1554;
        public const int CONNECTED_PAWN = 1555;
        public const int KNIGHT_OUTPOST = 1619;
        public const int BISHOP_OUTPOST = 1620;
        public const int BISHOP_PAIR = 1621;
        public const int ROOK_ON_OPEN_FILE = 1622;
        public const int ROOK_ON_HALF_OPEN_FILE = 1623;
        public const int ROOK_BEHIND_PASSED_PAWN = 1624;
        public const int DOUBLED_ROOKS_ON_FILE = 1625;
        public const int KING_ON_OPEN_FILE = 1626;
        public const int KING_ON_HALF_OPEN_FILE = 1627;
        public const int CASTLING_AVAILABLE = 1628;
        public const int CASTLING_COMPLETE = 1629;
        public const int CENTER_CONTROL = 1630;
        public const int QUEEN_ON_OPEN_FILE = 1632;
        public const int QUEEN_ON_HALF_OPEN_FILE = 1633;
        public const int ROOK_ON_7TH_RANK = 1634;
        public const int PASSED_PAWN = 1635;
        public const int BAD_BISHOP_PAWN = 1699;

        public ChessWeights(Guid _id, bool isActive, bool isImmortal, string description, short[] weights, 
            float fitness, int sampleSize, float k, short totalPasses, DateTime updatedOn, DateTime createdOn)
        {
            Id = _id;
            IsActive = isActive;
            IsImmortal = isImmortal;
            Description = description;
            Weights = weights;
            Fitness = fitness;
            SampleSize = sampleSize;
            K = k;
            TotalPasses = totalPasses;
            UpdatedOn = updatedOn;
            CreatedOn = createdOn;
        }

        public ChessWeights(ChessWeights other)
        {
            Id = Guid.NewGuid();
            IsActive = other.IsActive;
            IsImmortal = other.IsImmortal;
            Description = other.Description;
            Weights = ArrayEx.Clone(other.Weights);
            Fitness = other.Fitness;
            SampleSize = other.SampleSize;
            K = other.K;
            TotalPasses = other.TotalPasses;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights(short[] weights)
        {
            Id = Guid.NewGuid();
            IsActive = true;
            IsImmortal = false;
            Description = "Anonymous";
            Weights = ArrayEx.Clone(weights);
            Fitness = 0;
            SampleSize = 0;
            K = 0;
            TotalPasses = 0;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public ChessWeights()
        {
            Id = Guid.NewGuid();
            IsActive = false;
            IsImmortal = false;
            Description = string.Empty;
            Weights = Array.Empty<short>();
            Fitness = default;
            SampleSize = default;
            K = default;
            TotalPasses = default;
            UpdatedOn = DateTime.UtcNow;
            CreatedOn = DateTime.UtcNow;
        }

        public Guid Id { get; set; }
        public bool IsActive { get; set; }
        public bool IsImmortal { get; set; }
        public string Description { get; set; }
        public short[] Weights { get; init; }
        public float Fitness { get; set; }
        public int SampleSize { get; set; }
        public float K { get; set; }
        public short TotalPasses { get; set; }
        public DateTime UpdatedOn { get; set; }

        public DateTime CreatedOn { get; set; }

        public static ChessWeights Empty { get; } = new ChessWeights();

        public static ChessWeights CreateParagon()
        {
            ChessWeights paragon = new(paragonWeights)
            {
                Id = DEFAULT_IMMORTAL_ID,
                IsImmortal = true,
                Fitness = 0,
                SampleSize = 0,
                K = 0,
                TotalPasses = 0,
                UpdatedOn = DateTime.UtcNow
            };
            return paragon;
        }

        public static bool LoadParagon(out ChessWeights paragon)
        {
            var rep = new ChessDb();
            ChessWeights? p = rep.Weights.GetAll().FirstOrDefault(w => w.IsActive && w.IsImmortal);
            if (p == null)
            {
                p = CreateParagon();
                rep.Weights.Insert(p);
                rep.Save();
                paragon = p;
            }
            else
            {
                paragon = p;
            }
            return true;
        }

        // Solution sample size: 12000000, generated on Thu, 31 Aug 2023 15:14:15 GMT
        // Solution error: 0.111984, accuracy: 0.5376
        private static readonly short[] paragonWeights =
        {
            /*------------------- OPENING WEIGHTS -------------------*/

            /* opening piece values */
            117, 470, 527, 677, 1625, 0,

            /* opening piece square values */

            #region opening piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
             -23,  -40,  -26,  -12,  -37,   44,   53,   -8,
             -26,  -26,  -16,  -24,  -15,   17,   14,   -6,
             -16,  -22,   -1,    4,   13,   24,   -3,  -11,
             -13,   -9,   17,   24,   46,   56,   27,   12,
             -10,   -2,    4,   47,   72,  162,  161,   68,
              89,  124,  116,   83,   56,   35,  -68,   -1,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -51,  -63,  -49,  -49,  -42,   40,   51,  -10,
             -54,  -51,  -34,  -29,  -10,    8,   30,   -4,
             -26,    4,   -2,   10,    4,    2,   -3,   -6,
             -20,   21,   32,   24,   15,    1,   18,   -3,
              59,   85,  112,   24,   48,   26,  101,   58,
              71,  -53,   42,   58,  146,  131,  223,  181,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
              -3,   32,   16,  -21,  -59,  -16,  -25,  -37,
              13,   30,    1,  -21,  -27,   -6,  -36,  -41,
               7,    9,   -2,    0,    2,    3,   -8,  -13,
              -5,    0,    4,    7,   37,   50,   30,    7,
              17,   41,   23,   34,   85,  148,  152,   50,
             153,  207,  151,  116,   51,   46,  -31,  -40,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -13,   13,   16,  -11,  -41,   -8,  -13,  -20,
             -11,   -3,    1,  -35,   -1,  -30,  -31,  -15,
             -12,   -2,   10,    9,    7,    1,  -15,  -21,
              37,   59,   69,   15,   27,   16,   -1,    6,
             102,   65,   63,   44,   31,   35,   47,   43,
             142,   41,   57,   32,   99,   75,  288,  236,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
            -112,  -22,  -40,  -22,   -2,   -5,  -16,  -51,
             -50,  -48,  -12,    9,    5,   11,   -6,  -10,
             -39,  -19,  -15,   14,   32,   -6,    7,  -11,
             -16,    7,    3,   10,   16,   20,   27,    5,
               1,  -14,   24,   36,  -13,   26,  -22,   42,
              -3,   33,   31,   41,   90,  139,   31,  -13,
              -7,   -6,   22,   41,   62,   90,    6,   28,
            -238,  -53,   -5,   21,   71,  -64,   20, -167,

            /* knights: KQ */
            -122,  -72,  -31,    2,  -19,  -31,  -43,  -40,
             -36,  -16,  -23,   18,    0,    8,  -53,  -54,
             -56,  -15,  -14,   35,   20,   -1,  -18,  -25,
             -10,   34,   21,   47,   20,   28,  -11,    5,
              33,    0,   27,   52,   47,   65,   10,   15,
               3,   31,   96,  134,   58,   34,   26,   13,
              46,  -12,   26,   13,   44,   26,   35,  -17,
            -287,  -32,  -31,   25,   -7,    4,  -72, -150,

            /* knights: QK */
             -84,  -57,  -25,  -44,  -21,  -10,  -66,  -86,
             -20,    3,  -10,   -5,   -4,  -14,  -14,  -26,
             -30,  -24,   11,   42,   51,  -31,   -2,  -34,
              14,   36,   31,   26,   42,    7,   14,  -11,
              28,   29,   66,   84,   35,   65,   24,   34,
              20,   28,   48,   68,   83,  101,   14,   -9,
             -32,  -35,   32,   87,   25,   57,   -3,    7,
             -97,  -37,   -1,  114,   38,  -11,    6, -120,

            /* knights: QQ */
              -4,  -24,   -7,  -82,  -21,  -29,  -45, -177,
             -24,    2,  -24,    4,   -7,    0,  -58,  -58,
             -16,  -12,    2,   -3,   24,  -49,    2,  -15,
              -9,    2,   55,   37,    2,   24,   36,  -16,
              15,  -20,   26,   61,   37,   39,   27,    7,
              14,  -23,   45,  108,   59,   13,   82,   36,
              15,   17,   -8,    3,  -13,  -28,  -11,  -68,
            -181,  -16,  -47,  -51,   47,  -31,    1,  -55,

            /* bishops: KK */
             -19,   15,  -16,  -31,  -12,   -5,   17,    3,
              18,    1,   18,   -6,    4,   15,   34,   14,
             -19,   11,   11,    9,    2,   12,    4,    1,
             -12,  -10,   -2,   30,   24,  -19,  -24,   18,
             -13,  -12,    4,   46,   10,   18,  -20,  -26,
               3,   15,    3,   -3,   15,   53,   40,  -12,
             -42,  -15,  -16,  -21,  -28,  -44,  -74,  -56,
             -67,  -56,  -60,  -22,  -11,  -75,    4,  -35,

            /* bishops: KQ */
             -64,  -45,  -26,  -43,   13,   -1,   28,  -25,
             -36,   -2,   -8,    0,    9,   47,   50,   11,
             -27,  -19,   19,    7,   23,   46,   31,   15,
              -1,   13,    2,   49,   79,   22,   -4,    1,
             -21,   10,   40,   66,   57,   12,   18,  -22,
             -10,   18,   54,   10,   43,   37,    9,  -19,
             -51,   37,   24,  -26,   17,  -22,  -30,  -57,
             -25,    7,   -9,   11,  -23,   12,  -33,  -25,

            /* bishops: QK */
             -25,   -9,   -6,    0,  -29,  -21,  -28,  -87,
              33,   56,   28,   16,    0,  -22,  -38,  -18,
              14,   39,   45,   38,   -1,   -2,   -5,  -23,
               5,   34,   29,   62,   54,  -19,    3,  -10,
              -6,    8,   33,   86,   32,   59,   -3,  -17,
             -23,   30,   19,   43,   51,   77,   79,    7,
              -8,  -32,  -62,  -16,   -7,  -18,  -47,  -37,
             -62,  -43,    7,  -24,   12,  -11,   88,  -41,

            /* bishops: QQ */
             -84,  -53,  -14,  -64,  -28,  -19,   -3,   -9,
             -24,    6,   -1,    2,  -32,   22,  -17,  -12,
              -3,   -8,   -5,    5,   15,   16,    7,  -10,
              -4,   36,    9,   38,   15,   27,    3,   24,
             -40,    2,   10,   45,   36,   -2,    3,  -23,
             -69,   68,   40,   63,  -13,   -6,   14,  -11,
             -70,  -47,   47,  -11,   -7,  -23,  -23,    3,
             -27,  -19,    4,    8,   10,   24,  -19,  -36,

            /* rooks: KK */
             -17,   -2,   -7,    9,   16,   10,   26,   -6,
             -27,  -22,  -15,   -5,  -13,    9,   37,   -6,
             -48,  -39,  -36,  -20,   -9,  -12,   31,    3,
             -36,  -37,  -34,  -12,  -24,  -32,   19,  -25,
              -8,   -2,    3,   29,   -8,   26,   75,   37,
              14,   54,   54,   56,   89,  136,  126,   65,
             -16,  -21,   -6,   32,   13,   94,   69,   88,
              69,   65,   78,   86,   35,   48,  103,  121,

            /* rooks: KQ */
             -14,   24,    3,   -1,    3,    0,   -8,  -14,
             -44,  -14,  -32,  -24,  -19,  -40,  -36,  -26,
             -46,  -17,  -42,  -22,  -62,  -24,   -6,  -22,
             -77,   -9,  -44,  -40,  -21,  -55,   -8,  -35,
              -5,   44,  -13,   22,   18,   39,   45,    4,
              15,   91,   75,  109,   77,   56,   95,   64,
             -22,   24,   12,   55,   65,   37,   59,   56,
              44,   57,  -19,   39,   24,   78,   76,   78,

            /* rooks: QK */
             -58,   -5,  -26,   -4,  -13,  -11,   16,  -25,
               0,   -4,  -28,  -15,  -57,  -38,   -6,   -3,
             -12,  -24,  -29,  -45,  -60,  -48,  -14,  -22,
             -13,   -2,  -36,  -34,  -49,  -59,   -1,  -21,
              32,   27,   29,    1,   -9,   17,   -4,   10,
             103,   48,   47,    4,   15,  105,  122,   62,
              40,   39,   45,  -15,   13,   67,   18,   48,
             178,  116,   86,   28,   22,   69,  109,   89,

            /* rooks: QQ */
             -18,  -25,   -5,    9,    1,    0,   -4,  -23,
             -59,  -51,  -55,  -11,  -18,  -40,   20,  -28,
             -51,  -25,  -30,  -33,  -57,  -28,  -54,  -27,
             -32,  -15,  -17,   -7,  -12,  -14,  -45,  -35,
              13,   63,  -34,   19,   35,   -1,   29,   -8,
              60,  108,   98,   67,  104,   39,   55,   44,
              73,  100,   32,   27,   94,   55,   20,    2,
              33,   20,   -4,    0,   15,   59,  134,   31,

            /* queens: KK */
              -4,    4,   19,   24,   50,    9,  -55,  -55,
              -2,   11,   14,   18,   25,   50,   36,  -17,
             -17,   -3,    1,  -12,    6,   -4,   13,    4,
              -8,  -32,  -27,  -36,  -19,  -30,   -3,  -14,
             -15,  -15,  -37,  -32,  -43,  -38,  -29,  -23,
             -11,   -8,  -33,  -40,   -5,   48,   33,   11,
             -30,  -48,  -29,  -14,  -55,   20,   18,  109,
             -15,   18,   17,   -5,   18,   76,  130,   98,

            /* queens: KQ */
              20,   -5,    4,   15,    7,   -8,  -64,  -32,
              15,   32,   35,    3,   15,   29,  -28,  -81,
             -10,   10,   26,   -2,    1,    0,  -10,  -19,
              -5,   16,  -23,  -21,  -22,  -14,  -18,  -25,
              -1,   -2,  -43,    4,   -3,    4,   -9,   -7,
              29,   53,   44,   23,   11,   31,   23,  -10,
              65,   84,   38,   30,   43,    6,    6,    1,
              47,   71,   55,   75,   64,   51,   48,    6,

            /* queens: QK */
             -70, -116,   -3,   -1,   11,    3,    3,  -13,
             -74,  -53,   35,   17,   15,    3,    8,   14,
             -56,   -4,   -8,  -25,   -8,  -37,  -27,   13,
             -30,  -30,  -34,  -13,  -44,  -13,    9,   12,
               1,  -37,  -13,  -34,  -29,  -18,  -18,   -7,
             -23,  -22,  -17,  -29,   -3,   25,   57,   30,
              14,  -17,    4,    6,  -15,   10,   45,   77,
             -21,   36,   34,   22,    3,   36,  102,   34,

            /* queens: QQ */
              -9,  -40,   13,  -44,   19,  -24,   10,   -5,
             -89,  -30,   18,   23,  -19,  -12,  -22,  -40,
             -26,   -7,    1,  -14,  -10,   -3,   25,   35,
             -37,  -19,  -17,  -18,  -12,  -11,    3,  -14,
               8,  -17,  -12,  -33,   14,    2,   -4,   27,
              16,   89,   87,   28,   30,   29,   32,   17,
              77,  100,   79,   53,   76,   13,   14,  -11,
              24,  117,   37,   33,   82,   17,   67,   21,

            /* kings: KK */
               0,    0,    0,    0,  -52,  -72,    9,  -13,
               0,    0,    0,    0,  -21,   -6,   26,    3,
               0,    0,    0,    0,   35,   -5,   -4,  -42,
               0,    0,    0,    0,  138,   91,   28,  -62,
               0,    0,    0,    0,  272,  183,  120,   35,
               0,    0,    0,    0,  183,  232,  278,  112,
               0,    0,    0,    0,  229,  207,  130,   66,
               0,    0,    0,    0,   68,   57,   77,   35,

            /* kings: KQ */
               0,    0,    0,    0,  -84,  -89,    9,  -12,
               0,    0,    0,    0,  -12,    6,    2,   10,
               0,    0,    0,    0,   30,   11,   18,  -26,
               0,    0,    0,    0,   90,   83,   43,   -4,
               0,    0,    0,    0,  132,  111,   76,   45,
               0,    0,    0,    0,  101,  132,   90,   38,
               0,    0,    0,    0,  199,  140,  104,   18,
               0,    0,    0,    0,  102,   70,   76,  -13,

            /* kings: QK */
             -26,   18,  -46, -109,    0,    0,    0,    0,
              -3,   -5,   -9,  -45,    0,    0,    0,    0,
             -39,   14,    8,  -24,    0,    0,    0,    0,
             -12,   36,   49,   70,    0,    0,    0,    0,
             -22,   84,   84,  109,    0,    0,    0,    0,
              38,   66,  128,  158,    0,    0,    0,    0,
              72,  130,  124,  145,    0,    0,    0,    0,
             -11,   78,  124,   64,    0,    0,    0,    0,

            /* kings: QQ */
            -116,  -17,  -54,  -94,    0,    0,    0,    0,
             -58,   -8,   -1,  -33,    0,    0,    0,    0,
             -68,  -14,   15,    9,    0,    0,    0,    0,
              -5,   84,   77,   80,    0,    0,    0,    0,
              -4,  113,  161,  139,    0,    0,    0,    0,
              54,  123,  144,  131,    0,    0,    0,    0,
              25,   25,   87,  107,    0,    0,    0,    0,
             -40,   76,   56,   51,    0,    0,    0,    0,

            #endregion

            /* opening mobility weights */

            12, // knights
            6, // bishops
            3, // rooks
            0, // queens

            /* opening squares attacked near enemy king */
            23, // attacks to squares 1 from king
            22, // attacks to squares 2 from king
            7, // attacks to squares 3 from king

            /* opening pawn shield/king safety */
            28, // # friendly pawns 1 from king
            19, // # friendly pawns 2 from king
            12, // # friendly pawns 3 from king

            /* opening isolated pawns */
            -10,

            /* opening backward pawns */
            -17,

            /* opening doubled pawns */
            -22,

            /* opening adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              11,    2,    7,   19,   23,    3,  -24,   -4,
              12,    9,    8,    9,   32,   -6,    8,   -7,
               5,   21,    7,   19,   31,   47,   12,   41,
              34,   26,   49,   34,  104,   82,   53,   56,
             122,  167,  175,  165,  188,  163,  130,   77,
             107,  207,  214,  289,  221,  223,   71,   69,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening knight on outpost */
            -1,

            /* opening bishop on outpost */
            11,

            /* opening bishop pair */
            40,

            /* opening rook on open file */
            40,

            /* opening rook on half-open file */
            16,

            /* opening rook behind passed pawn */
            -11,

            /* opening doubled rooks on file */
            13,

            /* opening king on open file */
            -61,

            /* opening king on half-open file */
            -32,

            /* opening castling rights available */
            26,

            /* opening castling complete */
            29,

            /* opening center control */
            3, // D0
            4, // D1

            /* opening queen on open file */
            -7,

            /* opening queen on half-open file */
            10,

            /* opening rook on seventh rank */
            39,

            /* opening passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
             -13,  -12,  -30,  -63,   -5,  -11,    0,   28,
             -11,   -1,  -16,  -27,  -50,  -44,  -64,   23,
              24,   36,   -4,   -2,  -27,  -23,  -35,   -1,
              77,   72,   47,   45,   16,   33,   26,   43,
             178,  143,  141,   76,   60,  110,   -3,   24,
             171,  136,  136,  177,  163,  100,   58,   82,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* opening bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
              -7,   -4,  -10,    0,  -18,  -24,  -20,    0,
              -6,   -6,  -13,   -5,  -13,  -15,  -15,   -8,
             -10,    4,   -2,   -6,  -18,  -12,   -6,   -3,
               7,   16,    5,    8,    2,    4,    2,    4,
              28,   16,   25,   10,   41,   15,   50,   -4,
              98,   79,   92,   61,   45,   81,   41,  114,
               0,    0,    0,    0,    0,    0,    0,    0,


            /*------------------- END GAME WEIGHTS -------------------*/

            /* end game piece values */
            143, 377, 427, 730, 1224, 0,

            /* end game piece square values */

            #region end game piece square values

            /* pawns: KK */
               0,    0,    0,    0,    0,    0,    0,    0,
               2,    6,    6,  -34,   32,    7,  -11,  -23,
              -1,   -3,   -8,   -5,   -1,   -6,  -10,  -21,
               3,    9,  -13,  -33,  -30,  -13,    0,  -23,
              39,   18,    8,  -18,  -25,  -15,    7,   -6,
              51,   55,   61,   26,   19,    2,   16,  -17,
             111,  116,   84,   67,   29,    4,   40,   25,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: KQ */
               0,    0,    0,    0,    0,    0,    0,    0,
              21,   34,   37,   36,   -1,  -17,  -25,   -8,
               9,   13,    9,    4,  -18,  -19,  -29,  -17,
              -8,   -8,  -10,  -20,  -24,    3,   -2,    1,
               0,  -28,  -37,  -12,    0,   52,   45,   61,
             -48,  -68,  -63,   14,   84,  154,  169,  132,
             -44,   10,  -43,   24,  123,  178,  189,  202,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QK */
               0,    0,    0,    0,    0,    0,    0,    0,
             -12,  -29,  -15,   -3,   29,   27,   36,   29,
             -11,  -27,  -15,  -16,   -1,    2,    8,   14,
               8,   15,    8,  -13,  -11,   -5,   -5,   -8,
              62,   56,   48,   16,   -2,  -22,   -8,   -1,
              85,  102,  137,   71,   16,   -8,   -1,  -15,
             112,  148,  177,  114,   38,  -18,  -26,   26,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* pawns: QQ */
               0,    0,    0,    0,    0,    0,    0,    0,
             -23,  -21,   -3,  -14,    6,   -2,   -2,   13,
             -17,  -20,   -9,   -5,  -20,  -11,  -17,  -11,
             -16,   -5,  -11,  -19,  -24,  -18,  -10,   -4,
             -19,  -30,  -25,   -2,   -9,    7,   15,   22,
             -68,  -38,  -33,    3,   35,   60,   98,   70,
             -31,   33,  -12,   29,   70,  106,   94,  121,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* knights: KK */
             -58,  -84,  -46,  -27,  -44,  -29,  -62,  -81,
             -61,  -11,  -31,  -37,  -23,   -7,  -17,  -18,
             -25,   -5,    5,   21,   10,   -6,   -2,   10,
               8,   17,   39,   43,   49,   41,   35,   15,
              22,   23,   27,   40,   50,   48,   66,   28,
              27,   16,   27,   27,   17,   15,   45,   35,
              14,   23,   13,   37,   26,    6,   11,    8,
              28,   37,   31,   24,   21,   12,    7, -123,

            /* knights: KQ */
             -62,  -43,  -16,  -10,  -36,  -16,    1, -130,
             -23,  -11,  -21,  -23,  -10,  -14,    8,  -15,
               4,  -16,    0,  -11,    4,  -12,   -4,   18,
              -1,    6,   16,   -1,   23,   12,   12,    0,
             -21,  -29,    5,    1,    2,   -2,   -3,  -10,
             -34,  -24,  -38,  -40,   -5,   18,   15,    4,
             -39,  -29,  -40,   11,  -18,   11,   19,    4,
             -60,  -33,  -41,   12,  -36,   39,   31,  -54,

            /* knights: QK */
            -107,  -19,  -30,   -8,  -30,  -45,  -27,  -51,
             -42,   23,  -19,   -1,   -8,   -7,  -33,  -44,
              23,   -6,    1,   10,   -8,    4,  -15,  -30,
              14,    6,   20,   26,    8,   22,    5,  -23,
              12,   10,   20,   -2,   26,    7,   -3,   -6,
               7,   36,   28,    2,    4,    0,    2,   14,
               6,   31,   26,   31,   23,  -14,  -18,  -37,
             -27,   41,   16,   18,   -3,  -15,  -21, -133,

            /* knights: QQ */
             -60,  -45,  -24,   15,  -15,  -14,  -46,  -48,
              -9,   12,  -33,  -24,  -31,  -58,  -44,  -56,
             -21,   -2,  -16,    3,  -18,    8,  -25,  -37,
              25,    4,    8,   -4,    0,   -6,  -11,   -6,
               8,   15,  -14,  -11,    2,   -5,  -13,   30,
              14,   26,  -21,  -29,  -28,   21,  -17,  -16,
              32,   12,  -17,   26,   17,   17,   37,  -14,
             -55,   61,   14,   50,  -12,   26,   37,  -58,

            /* bishops: KK */
              -9,  -26,  -30,   14,   -2,   -3,  -41,  -64,
             -13,  -22,  -12,    9,   -7,  -10,  -31,  -58,
               8,   11,   32,   24,   42,    8,   -6,   -1,
               6,   25,   43,   19,   10,   31,   20,  -34,
              27,   19,   16,    7,   22,   20,   21,   33,
               8,   17,   14,   21,   24,   31,   21,   48,
              30,   26,   27,   26,   27,   30,   19,    0,
              38,   45,   54,   37,   24,   26,    0,   -3,

            /* bishops: KQ */
              48,   33,    2,   14,  -27,  -21,  -69,  -64,
              25,   -5,   11,   -7,  -10,  -54,  -26,  -36,
              30,   16,   14,   10,    7,  -14,   -5,  -19,
              16,   12,   17,  -24,  -16,   11,   19,    5,
              21,    2,  -24,  -40,   -1,   14,   15,    8,
               2,  -13,   -7,   15,    9,    9,   24,   35,
             -39,  -13,  -20,   -1,   -5,   32,   33,   41,
              -4,   -7,    2,   -5,   16,   19,   29,   40,

            /* bishops: QK */
             -34,  -22,    0,   -6,    4,  -12,   26,   11,
             -28,  -22,    1,    0,    3,    2,    4,   -1,
              13,    4,    7,    9,   26,    4,   -4,   -5,
               4,   14,   17,   -7,   -9,   32,   10,  -17,
              28,   25,   10,   -1,    1,   -7,   12,   20,
              24,   34,   18,   13,   15,   -1,  -19,    2,
              32,   31,   52,   24,    1,   25,   -4,  -18,
              39,   34,   10,   12,    6,    3,  -23,  -17,

            /* bishops: QQ */
              24,    7,  -30,   -7,  -26,  -40,  -37,  -39,
              -1,  -17,  -19,  -21,   -9,  -44,  -28,  -42,
               7,    0,   -1,  -23,  -22,  -18,  -45,  -24,
              11,   -8,  -12,  -43,  -25,  -23,  -28,  -36,
               5,  -16,  -39,  -39,  -40,  -15,  -27,   -3,
               0,  -40,  -26,  -22,    6,  -17,  -30,  -23,
             -21,   -8,  -34,    1,  -26,  -11,    6,  -33,
             -14,  -16,  -15,  -27,    5,   12,   -9,    5,

            /* rooks: KK */
              33,   16,   10,  -12,  -29,   -4,   -1,  -13,
              27,   26,    7,  -15,  -17,  -26,  -14,  -11,
              30,   35,   17,   -8,  -21,  -12,  -18,  -25,
              52,   51,   39,    7,   -5,   18,   16,   20,
              61,   59,   35,   14,   25,   14,   14,    8,
              64,   41,   31,   14,   -6,   -5,   14,   21,
              65,   72,   44,   11,   23,   13,   42,   27,
              49,   65,   29,    5,   49,   58,   53,   35,

            /* rooks: KQ */
             -20,  -40,  -37,  -32,  -38,  -22,    5,   -5,
              -8,  -27,  -31,  -37,  -25,    0,    9,  -11,
             -10,  -40,  -35,  -42,   -8,  -28,   -2,  -28,
              19,   -6,    1,  -19,  -22,   10,   13,   16,
               2,   -4,   -8,  -14,  -16,   -3,   12,   25,
              17,  -20,  -35,  -32,  -23,   -2,   -3,   17,
              29,    6,   -3,  -15,  -18,  -16,   16,   11,
              42,   19,   13,    7,   11,    1,   33,   18,

            /* rooks: QK */
              25,    1,    3,  -33,  -32,  -36,  -41,  -10,
             -10,   -1,    1,  -24,  -10,  -26,  -39,  -48,
              -6,    1,   -5,  -14,  -24,  -22,  -49,  -61,
               9,   10,    6,   -6,  -12,   -1,  -23,  -19,
              25,   30,   15,    7,    8,  -18,   -4,  -14,
              10,   29,   17,   15,   12,  -34,  -16,  -20,
              12,   22,    3,   19,   10,  -23,    7,    6,
             -63,    4,   12,   18,   26,  -14,   -1,   -1,

            /* rooks: QQ */
             -18,  -20,  -39,  -56,  -52,  -27,    0,    3,
             -20,   -3,  -20,  -61,  -55,  -49,  -57,  -19,
              -1,  -34,  -28,  -54,  -25,  -50,    2,   -9,
              -7,  -13,  -13,  -36,  -35,  -21,   -2,   16,
             -11,  -27,    0,  -21,  -41,  -12,   -6,    9,
              -3,  -37,  -12,  -21,  -55,  -12,    4,    9,
              -8,  -12,   -1,  -10,  -42,  -40,  -11,   14,
              25,   32,   23,   21,  -14,  -10,   10,   19,

            /* queens: KK */
             -15,  -26,  -55,  -51, -122, -124,  -74,   20,
              13,  -12,  -24,  -38,  -57,  -94,  -89,  -36,
               4,    4,    7,    1,  -17,   21,   13,  -10,
              24,   58,   33,   47,    7,   50,   34,   45,
              52,   51,   59,   52,   70,  100,  121,  134,
              57,   61,   64,   71,   81,   95,   96,  130,
              80,  105,   83,   68,  122,   89,  175,   87,
              56,   54,   55,   71,   82,   77,   83,   66,

            /* queens: KQ */
             -36,  -35,  -70,  -61,  -17,  -64,  -49,  -48,
             -24,  -32,  -69,  -33,  -43,  -61,  -41,  -59,
              -9,  -24,  -55,   -3,  -18,   31,   16,    7,
              34,  -30,   14,  -19,    2,   30,   37,   20,
              15,   17,   18,  -16,   -1,   20,   60,   63,
               3,    5,   -5,   14,   12,   17,   43,   40,
               9,    5,   46,   19,   23,   47,   65,   26,
              42,   37,   15,   32,   28,   43,   31,   22,

            /* queens: QK */
             -46,  -29, -113,  -91,  -87, -128,  -78,  -52,
             -12,  -63,  -85,  -39,  -70,  -72,   -4,  -20,
             -44,  -36,   10,    1,  -12,  -20,    3,  -33,
              -2,   -6,   -1,    2,   30,  -18,   -6,    1,
              10,   42,   21,   51,   25,   21,    4,  -13,
              -1,   57,   61,   38,    7,   19,   28,  -25,
               6,   36,   50,   26,   19,   14,  -12,   -2,
              22,   38,   35,   30,    9,   35,   34,   50,

            /* queens: QQ */
            -109,  -54,  -89,  -47,  -72,  -27,  -35,  -25,
             -90,  -66,  -32,  -76,  -14,  -33,  -26,  -23,
              -1,   -4,  -33,  -29,  -29,  -37,   -7,  -58,
              -3,   12,  -22,  -11,  -28,  -23,  -79,   22,
              25,   39,   13,   31,   -2,  -30,   -6,   -1,
              24,   40,   16,   28,  -10,  -14,   29,    9,
              32,   29,   34,   40,   23,    9,   41,    9,
             -29,   33,   42,  -29,    7,  -21,   -3,    0,

            /* kings: KK */
               0,    0,    0,    0,  -12,   10,  -23,  -51,
               0,    0,    0,    0,   14,    8,   -5,  -17,
               0,    0,    0,    0,   21,   21,    9,   -4,
               0,    0,    0,    0,   12,   17,   21,   12,
               0,    0,    0,    0,  -10,    3,   17,    7,
               0,    0,    0,    0,    4,    1,   22,   18,
               0,    0,    0,    0,   -2,   -6,   41,   24,
               0,    0,    0,    0,   29,   33,   48,  -66,

            /* kings: KQ */
               0,    0,    0,    0,    7,    1,  -44,  -43,
               0,    0,    0,    0,    7,   -6,    0,  -30,
               0,    0,    0,    0,   17,    7,   -3,  -15,
               0,    0,    0,    0,   20,   22,   26,   14,
               0,    0,    0,    0,   27,   42,   49,   29,
               0,    0,    0,    0,   40,   42,   50,   41,
               0,    0,    0,    0,   -6,    8,   22,   14,
               0,    0,    0,    0,  -11,   -5,  -23,  -45,

            /* kings: QK */
             -46,  -70,  -40,  -15,    0,    0,    0,    0,
             -39,  -20,  -26,  -15,    0,    0,    0,    0,
             -23,  -13,  -13,    3,    0,    0,    0,    0,
             -14,    9,   12,    4,    0,    0,    0,    0,
              23,   25,   23,    9,    0,    0,    0,    0,
              13,   40,   25,   10,    0,    0,    0,    0,
              -6,    8,   20,    4,    0,    0,    0,    0,
             -15,    8,   -8,   -3,    0,    0,    0,    0,

            /* kings: QQ */
              60,   -4,  -17,  -19,    0,    0,    0,    0,
               9,  -11,  -18,  -18,    0,    0,    0,    0,
              -9,   -9,  -12,   -7,    0,    0,    0,    0,
             -21,   -7,    0,    5,    0,    0,    0,    0,
               4,    5,    4,    3,    0,    0,    0,    0,
              11,   27,   -1,   11,    0,    0,    0,    0,
              -6,   56,    9,   14,    0,    0,    0,    0,
             -95,   37,   13,    8,    0,    0,    0,    0,

            #endregion

            /* end game mobility weights */

            5, // knights
            3, // bishops
            3, // rooks
            3, // queens

            /* end game squares attacked near enemy king */
            -6, // attacks to squares 1 from king
            -4, // attacks to squares 2 from king
            -1, // attacks to squares 3 from king

            /* end game pawn shield/king safety */
            11, // # friendly pawns 1 from king
            14, // # friendly pawns 2 from king
            10, // # friendly pawns 3 from king

            /* end game isolated pawns */
            -5,

            /* end game backward pawns */
            -9,

            /* end game doubled pawns */
            -38,

            /* end game adjacent/connected pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               7,   -6,    0,   -5,   15,  -22,   24,  -24,
               6,  -10,   25,   20,    4,    8,   14,  -16,
              18,    6,   39,   66,   29,   20,    8,   16,
              53,   72,   76,   81,   62,   31,   46,   24,
              89,   92,  126,  124,   94,  141,   89,   19,
             230,  317,  290,  403,  284,  256,  246,  179,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game knight on outpost */
            32,

            /* end game bishop on outpost */
            23,

            /* end game bishop pair */
            92,

            /* end game rook on open file */
            0,

            /* end game rook on half-open file */
            25,

            /* end game rook behind passed pawn */
            27,

            /* end game doubled rooks on file */
            11,

            /* end game king on open file */
            5,

            /* end game king on half-open file */
            45,

            /* end game castling rights available */
            -26,

            /* end game castling complete */
            -17,

            /* end game center control */
            6, // D0
            5, // D1

            /* end game queen on open file */
            30,

            /* end game queen on half-open file */
            16,

            /* end game rook on seventh rank */
            23,

            /* end game passed pawn */
               0,    0,    0,    0,    0,    0,    0,    0,
              28,   34,   31,   48,   -2,    3,   32,    0,
              31,   33,   20,   13,   24,   23,   57,   10,
              69,   54,   43,   34,   38,   37,   76,   60,
              92,   89,   63,   45,   58,   45,   68,   67,
             134,  145,   89,   79,   70,   48,   87,   96,
             129,  133,  138,  103,  134,  122,  147,   97,
               0,    0,    0,    0,    0,    0,    0,    0,

            /* end game bad bishop pawns */
               0,    0,    0,    0,    0,    0,    0,    0,
               5,   -1,   -1,  -34,  -14,    5,   -3,   -2,
              -9,  -10,   -9,  -29,  -18,   -8,   -7,   -7,
             -10,  -28,  -35,  -52,  -31,  -22,  -20,   -6,
             -32,  -40,  -46,  -63,  -48,  -39,  -32,  -39,
             -46,  -68,  -81,  -78, -101,  -81, -120,  -37,
             -84, -129, -132, -153, -185, -151, -172, -163,
               0,    0,    0,    0,    0,    0,    0,    0,
        };
    }
}